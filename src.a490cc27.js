parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"gWWw":[function(require,module,exports) {
var global = arguments[3];
var define;
var t,e=arguments[3],i=i||{};i.scope={},i.ASSUME_ES5=!1,i.ASSUME_NO_NATIVE_MAP=!1,i.ASSUME_NO_NATIVE_SET=!1,i.defineProperty=i.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},i.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==e&&null!=e?e:t},i.global=i.getGlobal(this),i.SYMBOL_PREFIX="jscomp_symbol_",i.initSymbol=function(){i.initSymbol=function(){},i.global.Symbol||(i.global.Symbol=i.Symbol)},i.symbolCounter_=0,i.Symbol=function(t){return i.SYMBOL_PREFIX+(t||"")+i.symbolCounter_++},i.initSymbolIterator=function(){i.initSymbol();var t=i.global.Symbol.iterator;t||(t=i.global.Symbol.iterator=i.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&i.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return i.arrayIterator(this)}}),i.initSymbolIterator=function(){}},i.arrayIterator=function(t){var e=0;return i.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},i.iteratorPrototype=function(t){return i.initSymbolIterator(),(t={next:t})[i.global.Symbol.iterator]=function(){return this},t},i.iteratorFromArray=function(t,e){i.initSymbolIterator(),t instanceof String&&(t+="");var r=0,n={next:function(){if(r<t.length){var i=r++;return{value:e(i,t[i]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n},i.polyfill=function(t,e,r,n){if(e){for(r=i.global,t=t.split("."),n=0;n<t.length-1;n++){var s=t[n];s in r||(r[s]={}),r=r[s]}(e=e(n=r[t=t[t.length-1]]))!=n&&null!=e&&i.defineProperty(r,t,{configurable:!0,writable:!0,value:e})}},i.polyfill("Array.prototype.keys",function(t){return t||function(){return i.iteratorFromArray(this,function(t){return t})}},"es6-impl","es3"),i.polyfill("Array.prototype.values",function(t){return t||function(){return i.iteratorFromArray(this,function(t,e){return e})}},"es6","es3"),i.polyfill("Array.prototype.fill",function(t){return t||function(t,e,i){var r=this.length||0;for(0>e&&(e=Math.max(0,r+e)),(null==i||i>r)&&(i=r),0>(i=Number(i))&&(i=Math.max(0,r+i)),e=Number(e||0);e<i;e++)this[e]=t;return this}},"es6-impl","es3"),this.Two=function(i){function r(){var t=document.body.getBoundingClientRect(),e=this.width=t.width;t=this.height=t.height;this.renderer.setSize(e,t,this.ratio),this.trigger(S.Events.resize,e,t)}function n(){U(n);for(var t=0;t<S.Instances.length;t++){var e=S.Instances[t];e.playing&&e.update()}}var s="undefined"!=typeof window?window:void 0!==e?e:null,a=Object.prototype.toString,o={_indexAmount:0,natural:{slice:Array.prototype.slice,indexOf:Array.prototype.indexOf,keys:Object.keys,bind:Function.prototype.bind,create:Object.create},identity:function(t){return t},isArguments:function(t){return"[object Arguments]"===a.call(t)},isFunction:function(t){return"[object Function]"===a.call(t)},isString:function(t){return"[object String]"===a.call(t)},isNumber:function(t){return"[object Number]"===a.call(t)},isDate:function(t){return"[object Date]"===a.call(t)},isRegExp:function(t){return"[object RegExp]"===a.call(t)},isError:function(t){return"[object Error]"===a.call(t)},isFinite:function(t){return isFinite(t)&&!isNaN(parseFloat(t))},isNaN:function(t){return o.isNumber(t)&&t!==+t},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===a.call(t)},isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},isEmpty:function(t){return null==t||(b&&(o.isArray(t)||o.isString(t)||o.isArguments(t))?0===t.length:0===o.keys(t).length)},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:Array.isArray||function(t){return"[object Array]"===a.call(t)},isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},toArray:function(t){return t?o.isArray(t)?y.call(t):b(t)?o.map(t,o.identity):o.values(t):[]},range:function(t,e,i){null==e&&(e=t||0,t=0),i=i||1,e=Math.max(Math.ceil((e-t)/i),0);for(var r=Array(e),n=0;n<e;n++,t+=i)r[n]=t;return r},indexOf:function(t,e){if(o.natural.indexOf)return o.natural.indexOf.call(t,e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},has:function(t,e){return null!=t&&hasOwnProperty.call(t,e)},bind:function(t,e){var i=o.natural.bind;if(i&&t.bind===i)return i.apply(t,y.call(arguments,1));var r=y.call(arguments,2);return function(){t.apply(e,r)}},extend:function(t){for(var e=y.call(arguments,1),i=0;i<e.length;i++){var r,n=e[i];for(r in n)t[r]=n[r]}return t},defaults:function(t){for(var e=y.call(arguments,1),i=0;i<e.length;i++){var r,n=e[i];for(r in n)void 0===t[r]&&(t[r]=n[r])}return t},keys:function(t){if(!o.isObject(t))return[];if(o.natural.keys)return o.natural.keys(t);var e,i=[];for(e in t)o.has(t,e)&&i.push(e);return i},values:function(t){for(var e=o.keys(t),i=[],r=0;r<e.length;r++)i.push(t[e[r]]);return i},each:function(t,e,i){i=i||this;for(var r=!b(t)&&o.keys(t),n=(r||t).length,s=0;s<n;s++){var a=r?r[s]:s;e.call(i,t[a],a,t)}return t},map:function(t,e,i){i=i||this;for(var r=!b(t)&&o.keys(t),n=(r||t).length,s=[],a=0;a<n;a++){var l=r?r[a]:a;s[a]=e.call(i,t[l],l,t)}return s},once:function(t){var e=!1;return function(){return e?t:(e=!0,t.apply(this,arguments))}},after:function(t,e){return function(){for(;1>--t;)return e.apply(this,arguments)}},uniqueId:function(t){var e=++o._indexAmount+"";return t?t+e:e}},l=Math.sin,h=Math.cos,c=Math.atan2,d=Math.sqrt,f=Math.PI,u=f/2,_=Math.pow,g=Math.min,p=Math.max,m=0,y=o.natural.slice,v=s.performance&&s.performance.now?s.performance:Date,x=Math.pow(2,53)-1,b=function(t){return"number"==typeof(t=null==t?void 0:t.length)&&0<=t&&t<=x},w={temp:s.document?s.document.createElement("div"):{},hasEventListeners:o.isFunction(s.addEventListener),bind:function(t,e,i,r){return this.hasEventListeners?t.addEventListener(e,i,!!r):t.attachEvent("on"+e,i),w},unbind:function(t,e,i,r){return w.hasEventListeners?t.removeEventListeners(e,i,!!r):t.detachEvent("on"+e,i),w},getRequestAnimationFrame:function(){var t=0,e=["ms","moz","webkit","o"],i=s.requestAnimationFrame;if(!i){for(var r=0;r<e.length;r++)i=s[e[r]+"RequestAnimationFrame"]||i;i=i||function(e,i){var r=(new Date).getTime(),n=Math.max(0,16-(r-t));return i=s.setTimeout(function(){e(r+n)},n),t=r+n,i}}return i.init=o.once(n),i}},S=s.Two=function(t){if(t=o.defaults(t||{},{fullscreen:!1,width:640,height:480,type:S.Types.svg,autostart:!1}),o.each(t,function(t,e){"fullscreen"!==e&&"autostart"!==e&&(this[e]=t)},this),o.isElement(t.domElement)){var e=t.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+e)||(this.type=S.Types[e])}this.renderer=new S[this.type](this),S.Utils.setPlaying.call(this,t.autostart),this.frameCount=0,t.fullscreen?(t=o.bind(r,this),o.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),o.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),w.bind(s,"resize",t),t()):o.isElement(t.domElement)||(this.renderer.setSize(t.width,t.height,this.ratio),this.width=t.width,this.height=t.height),this.scene=this.renderer.scene,S.Instances.push(this),U.init()};o.extend(S,{root:s,Array:s.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.0",Identifier:"two_",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){return s.Two=i,this},uniqueId:function(){var t=m;return m++,t},Utils:o.extend(o,{performance:v,defineProperty:function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0}})},release:function(t){o.isObject(t)&&(o.isFunction(t.unbind)&&t.unbind(),t.vertices&&(o.isFunction(t.vertices.unbind)&&t.vertices.unbind(),o.each(t.vertices,function(t){o.isFunction(t.unbind)&&t.unbind()})),t.children&&o.each(t.children,function(t){S.Utils.release(t)}))},xhr:function(t,e){var i=new XMLHttpRequest;return i.open("GET",t),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&e(i.responseText)},i.send(),i},Curve:{CollinearityEpsilon:_(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:.01},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},devicePixelRatio:s.devicePixelRatio||1,getBackingStoreRatio:function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1},getRatio:function(t){return S.Utils.devicePixelRatio/M(t)},setPlaying:function(t){return this.playing=!!t,this},getComputedMatrix:function(t,e){e=e&&e.identity()||new S.Matrix;for(var i=[];t&&t._matrix;)i.push(t._matrix),t=t.parent;return i.reverse(),o.each(i,function(t){t=t.elements,e.multiply(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9])}),e},deltaTransformPoint:function(t,e,i){return new S.Vector(e*t.a+i*t.c+0,e*t.b+i*t.d+0)},decomposeMatrix:function(t){var e=S.Utils.deltaTransformPoint(t,0,1),i=S.Utils.deltaTransformPoint(t,1,0);e=180/Math.PI*Math.atan2(e.y,e.x)-90;return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:e,skewY:180/Math.PI*Math.atan2(i.y,i.x),rotation:e}},applySvgAttributes:function(t,e){var i,r={},n={};if(getComputedStyle){var s=getComputedStyle(t);for(i=s.length;i--;){var a=s[i],l=s[a];void 0!==l&&(n[a]=l)}}for(i=t.attributes.length;i--;)r[(l=t.attributes[i]).nodeName]=l.value;for(a in o.isUndefined(n.opacity)||(n["stroke-opacity"]=n.opacity,n["fill-opacity"]=n.opacity),o.extend(n,r),n.visible=!(o.isUndefined(n.display)&&"none"===n.display)||o.isUndefined(n.visibility)&&"hidden"===n.visibility,n)switch(l=n[a],a){case"transform":if("none"===l)break;if(null===(t.getCTM?t.getCTM():null))break;r=S.Utils.decomposeMatrix(t.getCTM()),e.translation.set(r.translateX,r.translateY),e.rotation=r.rotation,e.scale=r.scaleX,r=parseFloat((n.x+"").replace("px")),i=parseFloat((n.y+"").replace("px")),r&&(e.translation.x=r),i&&(e.translation.y=i);break;case"visible":e.visible=l;break;case"stroke-linecap":e.cap=l;break;case"stroke-linejoin":e.join=l;break;case"stroke-miterlimit":e.miter=l;break;case"stroke-width":e.linewidth=parseFloat(l);break;case"stroke-opacity":case"fill-opacity":case"opacity":e.opacity=parseFloat(l);break;case"fill":case"stroke":/url\(\#.*\)/i.test(l)?e[a]=this.getById(l.replace(/url\(\#(.*)\)/i,"$1")):e[a]="none"===l?"transparent":l;break;case"id":e.id=l;break;case"class":e.classList=l.split(" ")}return e},read:{svg:function(){return S.Utils.read.g.apply(this,arguments)},g:function(t){var e=new S.Group;S.Utils.applySvgAttributes.call(this,t,e);for(var i=0,r=t.childNodes.length;i<r;i++){var n=t.childNodes[i],s=n.nodeName;if(!s)return;(s=s.replace(/svg\:/gi,"").toLowerCase())in S.Utils.read&&(n=S.Utils.read[s].call(e,n),e.add(n))}return e},polygon:function(t,e){var i=[];return t.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(t,e,r){i.push(new S.Anchor(parseFloat(e),parseFloat(r)))}),(e=new S.Path(i,!e).noStroke()).fill="black",S.Utils.applySvgAttributes.call(this,t,e)},polyline:function(t){return S.Utils.read.polygon.call(this,t,!0)},path:function(t){var e,i,r=t.getAttribute("d"),n=new S.Anchor,s=!1,a=!1,l=r.match(/[a-df-z][^a-df-z]*/gi),h=l.length-1;o.each(l.slice(0),function(t,e){var i,r=t[0],n=r.toLowerCase(),s=t.slice(1).trim().split(/[\s,]+|(?=\s?[+\-])/),a=[];switch(0>=e&&(l=[]),n){case"h":case"v":1<s.length&&(i=1);break;case"m":case"l":case"t":2<s.length&&(i=2);break;case"s":case"q":4<s.length&&(i=4);break;case"c":6<s.length&&(i=6)}if(i){for(t=0,e=s.length,n=0;t<e;t+=i){var o=r;if(0<n)switch(r){case"m":o="l";break;case"M":o="L"}a.push([o].concat(s.slice(t,t+i)).join(" ")),n++}l=Array.prototype.concat.apply(l,a)}else l.push(t)});var c=[];if(o.each(l,function(t,r){var l=t[0],d=l.toLowerCase();switch(i=(i=(i=t.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(t,e,i){return parseFloat(e)*_(10,i)})).split(/[\s,]+|(?=\s?[+\-])/),a=l===d,d){case"z":if(r>=h)s=!0;else{t=n.x,r=n.y;var f=new S.Anchor(t,r,void 0,void 0,void 0,void 0,S.Commands.close)}break;case"m":case"l":t=parseFloat(i[0]),r=parseFloat(i[1]),f=new S.Anchor(t,r,void 0,void 0,void 0,void 0,"m"===d?S.Commands.move:S.Commands.line),a&&f.addSelf(n),n=f;break;case"h":case"v":d="x"===(r="h"===d?"x":"y")?"y":"x",(f=new S.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,S.Commands.line))[r]=parseFloat(i[0]),f[d]=n[d],a&&(f[r]+=n[r]),n=f;break;case"c":case"s":if(f=n.x,r=n.y,e||(e=new S.Vector),"c"===d){l=parseFloat(i[0]);var u=parseFloat(i[1]),g=parseFloat(i[2]),p=parseFloat(i[3]);d=parseFloat(i[4]),t=parseFloat(i[5])}else l=(d=T(n,e,a)).x,u=d.y,g=parseFloat(i[0]),p=parseFloat(i[1]),d=parseFloat(i[2]),t=parseFloat(i[3]);a&&(l+=f,u+=r,g+=f,p+=r,d+=f,t+=r),o.isObject(n.controls)||S.Anchor.AppendCurveProperties(n),n.controls.right.set(l-n.x,u-n.y),n=f=new S.Anchor(d,t,g-d,p-t,void 0,void 0,S.Commands.curve),e=f.controls.left;break;case"t":case"q":f=n.x,r=n.y,e||(e=new S.Vector),e.isZero()?(l=f,u=r):(l=e.x,r=e.y),"q"===d?(g=parseFloat(i[0]),p=parseFloat(i[1]),d=parseFloat(i[1]),t=parseFloat(i[2])):(g=(d=T(n,e,a)).x,p=d.y,d=parseFloat(i[0]),t=parseFloat(i[1])),a&&(l+=f,u+=r,g+=f,p+=r,d+=f,t+=r),o.isObject(n.controls)||S.Anchor.AppendCurveProperties(n),n.controls.right.set(l-n.x,u-n.y),n=f=new S.Anchor(d,t,g-d,p-t,void 0,void 0,S.Commands.curve),e=f.controls.left;break;case"a":f=n.x,r=n.y;var m=parseFloat(i[0]),y=parseFloat(i[1]);u=parseFloat(i[2])*Math.PI/180,l=parseFloat(i[3]),g=parseFloat(i[4]),d=parseFloat(i[5]),t=parseFloat(i[6]),a&&(d+=f,t+=r);var v=(t-r)/2;p=(x=(d-f)/2)*Math.cos(u)+v*Math.sin(u);var x=-x*Math.sin(u)+v*Math.cos(u),b=y*y,w=(k=p*p)/(v=m*m)+(A=x*x)/b;1<w&&(m*=Math.sqrt(w),y*=Math.sqrt(w)),b=Math.sqrt((v*b-v*A-b*k)/(v*A+b*k)),o.isNaN(b)?b=0:l!=g&&0<b&&(b*=-1),v=b*m*x/y,b=-b*y*p/m,f=v*Math.cos(u)-b*Math.sin(u)+(f+d)/2;var A,k=v*Math.sin(u)+b*Math.cos(u)+(r+t)/2,E=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))*Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)))},R=(r=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(E(t,e))})([1,0],[(p-v)/m,(x-b)/y]),C=r(A=[(p-v)/m,(x-b)/y],p=[(-p-v)/m,(-x-b)/y]);-1>=E(A,p)&&(C=Math.PI),1<=E(A,p)&&(C=0),l&&(C=F(C,2*Math.PI)),g&&0<C&&(C-=2*Math.PI);var M=S.Resolution,P=(new S.Matrix).translate(f,k).rotate(u);(f=o.map(o.range(M),function(t){return t=(1-t/(M-1))*C+R,t=P.multiply(m*Math.cos(t),y*Math.sin(t),1),new S.Anchor(t.x,t.y,!1,!1,!1,!1,S.Commands.line)})).push(new S.Anchor(d,t,!1,!1,!1,!1,S.Commands.line)),n=f[f.length-1],e=n.controls.left}f&&(o.isArray(f)?c=c.concat(f):c.push(f))}),!(1>=c.length)){(r=new S.Path(c,s,void 0,!0).noStroke()).fill="black";var d=r.getBoundingClientRect(!0);return d.centroid={x:d.left+d.width/2,y:d.top+d.height/2},o.each(r.vertices,function(t){t.subSelf(d.centroid)}),r.translation.addSelf(d.centroid),S.Utils.applySvgAttributes.call(this,t,r)}},circle:function(t){var e=parseFloat(t.getAttribute("cx")),i=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("r"));return(e=new S.Circle(e,i,r).noStroke()).fill="black",S.Utils.applySvgAttributes.call(this,t,e)},ellipse:function(t){var e=parseFloat(t.getAttribute("cx")),i=parseFloat(t.getAttribute("cy")),r=parseFloat(t.getAttribute("rx")),n=parseFloat(t.getAttribute("ry"));return(e=new S.Ellipse(e,i,r,n).noStroke()).fill="black",S.Utils.applySvgAttributes.call(this,t,e)},rect:function(t){var e=parseFloat(t.getAttribute("x"))||0,i=parseFloat(t.getAttribute("y"))||0,r=parseFloat(t.getAttribute("width")),n=parseFloat(t.getAttribute("height"));return(e=new S.Rectangle(e+r/2,i+n/2,r,n).noStroke()).fill="black",S.Utils.applySvgAttributes.call(this,t,e)},line:function(t){var e=parseFloat(t.getAttribute("x1")),i=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),n=parseFloat(t.getAttribute("y2"));e=new S.Line(e,i,r,n).noFill();return S.Utils.applySvgAttributes.call(this,t,e)},lineargradient:function(t){for(var e,i=parseFloat(t.getAttribute("x1")),r=parseFloat(t.getAttribute("y1")),n=parseFloat(t.getAttribute("x2")),s=parseFloat(t.getAttribute("y2")),a=(n+i)/2,l=(s+r)/2,h=[],c=0;c<t.children.length;c++){e=t.children[c];var d=parseFloat(e.getAttribute("offset")),f=e.getAttribute("stop-color"),u=e.getAttribute("stop-opacity"),_=e.getAttribute("style");o.isNull(f)&&(f=(e=!!_&&_.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/))&&1<e.length?e[1]:void 0),o.isNull(u)&&(u=(e=!!_&&_.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&1<e.length?parseFloat(e[1]):1),h.push(new S.Gradient.Stop(d,f,u))}return i=new S.LinearGradient(i-a,r-l,n-a,s-l,h),S.Utils.applySvgAttributes.call(this,t,i)},radialgradient:function(t){var e=parseFloat(t.getAttribute("cx"))||0,i=parseFloat(t.getAttribute("cy"))||0,r=parseFloat(t.getAttribute("r")),n=parseFloat(t.getAttribute("fx")),s=parseFloat(t.getAttribute("fy"));o.isNaN(n)&&(n=e),o.isNaN(s)&&(s=i);for(var a=Math.abs(e+n)/2,l=Math.abs(i+s)/2,h=[],c=0;c<t.children.length;c++){var d=t.children[c],f=parseFloat(d.getAttribute("offset")),u=d.getAttribute("stop-color"),_=d.getAttribute("stop-opacity"),g=d.getAttribute("style");o.isNull(u)&&(u=(d=!!g&&g.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/))&&1<d.length?d[1]:void 0),o.isNull(_)&&(_=(d=!!g&&g.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&1<d.length?parseFloat(d[1]):1),h.push(new S.Gradient.Stop(f,u,_))}return e=new S.RadialGradient(e-a,i-l,r,h,n-a,s-l),S.Utils.applySvgAttributes.call(this,t,e)}},subdivide:function(t,e,i,r,n,s,a,l,h){var c=(h=h||S.Utils.Curve.RecursionLimit)+1;return t===a&&e===l?[new S.Anchor(a,l)]:o.map(o.range(0,c),function(o){var h=o/c;return o=P(h,t,i,n,a),h=P(h,e,r,s,l),new S.Anchor(o,h)})},getPointOnCubicBezier:function(t,e,i,r,n){var s=1-t;return s*s*s*e+3*s*s*t*i+3*s*t*t*r+t*t*t*n},getCurveLength:function(t,e,i,r,n,s,a,o,l){if(t===i&&e===r&&n===a&&s===o)return d((t=a-t)*t+(e=o-e)*e);var h=9*(i-n)+3*(a-t),c=6*(t+n)-12*i,f=3*(i-t),u=9*(r-s)+3*(o-e),_=6*(e+s)-12*r,g=3*(r-e);return O(function(t){var e=(h*t+c)*t+f;return d(e*e+(t=(u*t+_)*t+g)*t)},0,1,l||S.Utils.Curve.RecursionLimit)},integrate:function(t,e,i,r){var n=S.Utils.Curve.abscissas[r-2],s=S.Utils.Curve.weights[r-2];e=(i=.5*(i-e))+e;var a=0,o=r+1>>1;for(r=1&r?s[a++]*t(e):0;a<o;){var l=i*n[a];r+=s[a++]*(t(e+l)+t(e-l))}return i*r},getCurveFromPoints:function(t,e){for(var i=t.length,r=i-1,n=0;n<i;n++){var s=t[n];o.isObject(s.controls)||S.Anchor.AppendCurveProperties(s);var a=e?F(n-1,i):p(n-1,0),l=e?F(n+1,i):g(n+1,r);C(t[a],s,t[l]),s._command=0===n?S.Commands.move:S.Commands.curve,s.controls.left.x=o.isNumber(s.controls.left.x)?s.controls.left.x:s.x,s.controls.left.y=o.isNumber(s.controls.left.y)?s.controls.left.y:s.y,s.controls.right.x=o.isNumber(s.controls.right.x)?s.controls.right.x:s.x,s.controls.right.y=o.isNumber(s.controls.right.y)?s.controls.right.y:s.y}},getControlPoints:function(t,e,i){var r=R(t,e),n=R(i,e);t=k(t,e),i=k(i,e);var s=(r+n)/2;return e.u=o.isObject(e.controls.left)?e.controls.left:new S.Vector(0,0),e.v=o.isObject(e.controls.right)?e.controls.right:new S.Vector(0,0),1e-4>t||1e-4>i?(e._relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(t*=.33,i*=.33,s=n<r?s+u:s-u,e.controls.left.x=h(s)*t,e.controls.left.y=l(s)*t,s-=f,e.controls.right.x=h(s)*i,e.controls.right.y=l(s)*i,e._relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},getReflection:function(t,e,i){return new S.Vector(2*t.x-(e.x+t.x)-(i?t.x:0),2*t.y-(e.y+t.y)-(i?t.y:0))},getAnchorsFromArcData:function(t,e,i,r,n,s,a){(new S.Matrix).translate(t.x,t.y).rotate(e);var l=S.Resolution;return o.map(o.range(l),function(t){return t=(t+1)/l,a&&(t=1-t),t=t*s+n,t=new S.Anchor(i*Math.cos(t),r*Math.sin(t)),S.Anchor.AppendCurveProperties(t),t.command=S.Commands.line,t})},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){if(4<=arguments.length){var i=arguments[0]-arguments[2],r=arguments[1]-arguments[3];return c(r,i)}return i=t.x-e.x,r=t.y-e.y,c(r,i)},distanceBetweenSquared:function(t,e){var i=t.x-e.x;return i*i+(t=t.y-e.y)*t},distanceBetween:function(t,e){return d(E(t,e))},lerp:function(t,e,i){return i*(e-t)+t},toFixed:function(t){return Math.floor(1e3*t)/1e3},mod:function(t,e){for(;0>t;)t+=e;return t%e},Collection:function(){Array.call(this),1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(t){this.name="two.js",this.message=t},Events:{on:function(t,e){return this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push(e),this},off:function(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this;for(var i=t?[t]:o.keys(this._events),r=0,n=i.length;r<n;r++){t=i[r];var s=this._events[t];if(s){var a=[];if(e)for(var l=0,h=s.length;l<h;l++){var c=(c=s[l]).callback?c.callback:c;e&&e!==c&&a.push(c)}this._events[t]=a}}return this},trigger:function(t){if(!this._events)return this;var e=y.call(arguments,1),i=this._events[t];return i&&A(this,i,e),this},listen:function(t,e,i){var r=this;if(t){var n=function(){i.apply(r,arguments)};n.obj=t,n.name=e,n.callback=i,t.on(e,n)}return this},ignore:function(t,e,i){return t.off(e,i),this}}})}),S.Utils.Events.bind=S.Utils.Events.on,S.Utils.Events.unbind=S.Utils.Events.off;var A=function(t,e,i){switch(i.length){case 0:var r=function(r){e[r].call(t,i[0])};break;case 1:r=function(r){e[r].call(t,i[0],i[1])};break;case 2:r=function(r){e[r].call(t,i[0],i[1],i[2])};break;case 3:r=function(r){e[r].call(t,i[0],i[1],i[2],i[3])};break;default:r=function(r){e[r].apply(t,i)}}for(var n=0;n<e.length;n++)r(n)};S.Utils.Error.prototype=Error(),S.Utils.Error.prototype.constructor=S.Utils.Error,S.Utils.Collection.prototype=[],S.Utils.Collection.prototype.constructor=S.Utils.Collection,o.extend(S.Utils.Collection.prototype,S.Utils.Events,{pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(S.Events.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(S.Events.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(S.Events.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(S.Events.insert,arguments),t},splice:function(){var t=Array.prototype.splice.apply(this,arguments);if(this.trigger(S.Events.remove,t),2<arguments.length){var e=this.slice(arguments[0],arguments[0]+arguments.length-2);this.trigger(S.Events.insert,e),this.trigger(S.Events.order)}return t},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(S.Events.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(S.Events.order),this}});var k=S.Utils.distanceBetween,E=S.Utils.distanceBetweenSquared,R=S.Utils.angleBetween,C=S.Utils.getControlPoints,F=S.Utils.mod,M=S.Utils.getBackingStoreRatio,P=S.Utils.getPointOnCubicBezier,O=S.Utils.integrate,T=S.Utils.getReflection;o.extend(S.prototype,S.Utils.Events,{appendTo:function(t){return t.appendChild(this.renderer.domElement),this},play:function(){return S.Utils.setPlaying.call(this,!0),this.trigger(S.Events.play)},pause:function(){return this.playing=!1,this.trigger(S.Events.pause)},update:function(){var t=!!this._lastFrame,e=v.now();this.frameCount++,t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e;t=this.width,e=this.height;var i=this.renderer;return t===i.width&&e===i.height||i.setSize(t,e,this.ratio),this.trigger(S.Events.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(S.Events.render,this.frameCount)},add:function(t){var e=t;return e instanceof Array||(e=o.toArray(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=o.toArray(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(o.toArray(this.scene.children)),this},makeLine:function(t,e,i,r){return t=new S.Line(t,e,i,r),this.scene.add(t),t},makeRectangle:function(t,e,i,r){return t=new S.Rectangle(t,e,i,r),this.scene.add(t),t},makeRoundedRectangle:function(t,e,i,r,n){return t=new S.RoundedRectangle(t,e,i,r,n),this.scene.add(t),t},makeCircle:function(t,e,i){return t=new S.Circle(t,e,i),this.scene.add(t),t},makeEllipse:function(t,e,i,r){return t=new S.Ellipse(t,e,i,r),this.scene.add(t),t},makeStar:function(t,e,i,r,n){return t=new S.Star(t,e,i,r,n),this.scene.add(t),t},makeCurve:function(t){var e=arguments.length,i=t;if(!o.isArray(t)){i=[];for(var r=0;r<e;r+=2){var n=arguments[r];if(!o.isNumber(n))break;i.push(new S.Anchor(n,arguments[r+1]))}}return e=arguments[e-1],e=(i=new S.Path(i,!(o.isBoolean(e)&&e),!0)).getBoundingClientRect(),i.center().translation.set(e.left+e.width/2,e.top+e.height/2),this.scene.add(i),i},makePolygon:function(t,e,i,r){return t=new S.Polygon(t,e,i,r),this.scene.add(t),t},makeArcSegment:function(t,e,i,r,n,s,a){return t=new S.ArcSegment(t,e,i,r,n,s,a),this.scene.add(t),t},makePath:function(t){var e=arguments.length,i=t;if(!o.isArray(t)){i=[];for(var r=0;r<e;r+=2){var n=arguments[r];if(!o.isNumber(n))break;i.push(new S.Anchor(n,arguments[r+1]))}}return e=arguments[e-1],e=(i=new S.Path(i,!(o.isBoolean(e)&&e))).getBoundingClientRect(),i.center().translation.set(e.left+e.width/2,e.top+e.height/2),this.scene.add(i),i},makeText:function(t,e,i,r){return t=new S.Text(t,e,i,r),this.add(t),t},makeLinearGradient:function(t,e,i,r){var n=y.call(arguments,4);n=new S.LinearGradient(t,e,i,r,n);return this.add(n),n},makeRadialGradient:function(t,e,i){var r=y.call(arguments,3);r=new S.RadialGradient(t,e,i,r);return this.add(r),r},makeSprite:function(t,e,i,r,n,s,a){return t=new S.Sprite(t,e,i,r,n,s),a&&t.play(),this.add(t),t},makeImageSequence:function(t,e,i,r,n){return t=new S.ImageSequence(t,e,i,r),n&&t.play(),this.add(t),t},makeTexture:function(t,e){return new S.Texture(t,e)},makeGroup:function(t){var e=t;e instanceof Array||(e=o.toArray(arguments));var i=new S.Group;return this.scene.add(i),i.add(e),i},interpret:function(t,e){var i=t.tagName.toLowerCase();return i in S.Utils.read?(t=S.Utils.read[i].call(this,t),e&&t instanceof S.Group?this.add(t.children):this.add(t),t):null},load:function(t,e){var i,r=[];if(/.*\.svg/gi.test(t))return S.Utils.xhr(t,o.bind(function(t){for(w.temp.innerHTML=t,i=0;i<w.temp.children.length;i++)n=w.temp.children[i],r.push(this.interpret(n));e(1>=r.length?r[0]:r,1>=w.temp.children.length?w.temp.children[0]:w.temp.children)},this)),this;for(w.temp.innerHTML=t,i=0;i<w.temp.children.length;i++){var n=w.temp.children[i];r.push(this.interpret(n))}return e(1>=r.length?r[0]:r,1>=w.temp.children.length?w.temp.children[0]:w.temp.children),this}});var U=w.getRequestAnimationFrame();return"function"==typeof t&&t.amd?t("two",[],function(){return S}):"undefined"!=typeof module&&module.exports&&(module.exports=S),S}((void 0!==e?e:this).Two),function(t){var e=t.Utils;t=t.Registry=function(){this.map={}},e.extend(t,{}),e.extend(t.prototype,{add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}})}((void 0!==e?e:this).Two),function(t){var e=t.Utils,i=t.Vector=function(t,e){this.x=t||0,this.y=e||0};e.extend(i,{zero:new t.Vector}),e.extend(i.prototype,t.Utils.Events,{set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.y=this.x=0,this},clone:function(){return new i(this.x,this.y)},add:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this},multiplySelf:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return t?(this.x/=t,this.y/=t):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x;return e*e+(t=this.y-t.y)*t},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){return this.set((t.x-this.x)*e+this.x,(t.y-this.y)*e+this.y)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t);return t=Math.sin(t),this.x=this.x*e-this.y*t,this.y=this.x*t+this.y*e,this}});var r={set:function(e,i){return this._x=e,this._y=i,this.trigger(t.Events.change)},copy:function(e){return this._x=e.x,this._y=e.y,this.trigger(t.Events.change)},clear:function(){return this._y=this._x=0,this.trigger(t.Events.change)},clone:function(){return new i(this._x,this._y)},add:function(e,i){return this._x=e.x+i.x,this._y=e.y+i.y,this.trigger(t.Events.change)},addSelf:function(e){return this._x+=e.x,this._y+=e.y,this.trigger(t.Events.change)},sub:function(e,i){return this._x=e.x-i.x,this._y=e.y-i.y,this.trigger(t.Events.change)},subSelf:function(e){return this._x-=e.x,this._y-=e.y,this.trigger(t.Events.change)},multiplySelf:function(e){return this._x*=e.x,this._y*=e.y,this.trigger(t.Events.change)},multiplyScalar:function(e){return this._x*=e,this._y*=e,this.trigger(t.Events.change)},divideScalar:function(e){return e?(this._x/=e,this._y/=e,this.trigger(t.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this._x-t.x;return e*e+(t=this._y-t.y)*t},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){return this.set((t.x-this._x)*e+this._x,(t.y-this._y)*e+this._y)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t);return t=Math.sin(t),this._x=this._x*e-this._y*t,this._y=this._x*t+this._y*e,this}},n={enumerable:!0,get:function(){return this._x},set:function(e){this._x=e,this.trigger(t.Events.change,"x")}},s={enumerable:!0,get:function(){return this._y},set:function(e){this._y=e,this.trigger(t.Events.change,"y")}};t.Vector.prototype.bind=t.Vector.prototype.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",n),Object.defineProperty(this,"y",s),e.extend(this,r),this._bound=!0),t.Utils.Events.bind.apply(this,arguments),this}}((void 0!==e?e:this).Two),function(t){var e=t.Commands,i=t.Utils,r=t.Anchor=function(n,s,a,o,l,h,c){if(t.Vector.call(this,n,s),this._broadcast=i.bind(function(){this.trigger(t.Events.change)},this),this._command=c||e.move,this._relative=!0,!c)return this;r.AppendCurveProperties(this),i.isNumber(a)&&(this.controls.left.x=a),i.isNumber(o)&&(this.controls.left.y=o),i.isNumber(l)&&(this.controls.right.x=l),i.isNumber(h)&&(this.controls.right.y=h)};i.extend(r,{AppendCurveProperties:function(e){e.controls={left:new t.Vector(0,0),right:new t.Vector(0,0)}}});var n={listen:function(){return i.isObject(this.controls)||r.AppendCurveProperties(this),this.controls.left.bind(t.Events.change,this._broadcast),this.controls.right.bind(t.Events.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(t.Events.change,this._broadcast),this.controls.right.unbind(t.Events.change,this._broadcast),this},clone:function(){var e=this.controls;return(e=new t.Anchor(this.x,this.y,e&&e.left.x,e&&e.left.y,e&&e.right.x,e&&e.right.y,this.command)).relative=this._relative,e},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y].join(", "):[this._x,this._y].join(", ")}};Object.defineProperty(r.prototype,"command",{enumerable:!0,get:function(){return this._command},set:function(n){return this._command=n,this._command!==e.curve||i.isObject(this.controls)||r.AppendCurveProperties(this),this.trigger(t.Events.change)}}),Object.defineProperty(r.prototype,"relative",{enumerable:!0,get:function(){return this._relative},set:function(e){return this._relative==e?this:(this._relative=!!e,this.trigger(t.Events.change))}}),i.extend(r.prototype,t.Vector.prototype,n),t.Anchor.prototype.bind=t.Anchor.prototype.on=function(){t.Vector.prototype.bind.apply(this,arguments),i.extend(this,n)},t.Anchor.prototype.unbind=t.Anchor.prototype.off=function(){t.Vector.prototype.unbind.apply(this,arguments),i.extend(this,n)}}((void 0!==e?e:this).Two),function(t){var e=Math.cos,i=Math.sin,r=Math.tan,n=t.Utils,s=t.Matrix=function(e,i,r,s,a,o){this.elements=new t.Array(9);var l=e;n.isArray(l)||(l=n.toArray(arguments)),this.identity().set(l)};n.extend(s,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(e,i,r){if(3>=i.length){r=i[0]||0;var n=i[1]||0;return i=i[2]||0,{x:e[0]*r+e[1]*n+e[2]*i,y:e[3]*r+e[4]*n+e[5]*i,z:e[6]*r+e[7]*n+e[8]*i}}n=e[0];var s=e[1],a=e[2],o=e[3],l=e[4],h=e[5],c=e[6],d=e[7];e=e[8];var f=i[0],u=i[1],_=i[2],g=i[3],p=i[4],m=i[5],y=i[6],v=i[7];return i=i[8],(r=r||new t.Array(9))[0]=n*f+s*g+a*y,r[1]=n*u+s*p+a*v,r[2]=n*_+s*m+a*i,r[3]=o*f+l*g+h*y,r[4]=o*u+l*p+h*v,r[5]=o*_+l*m+h*i,r[6]=c*f+d*g+e*y,r[7]=c*u+d*p+e*v,r[8]=c*_+d*m+e*i,r}}),n.extend(s.prototype,t.Utils.Events,{set:function(e){var i=e;return n.isArray(i)||(i=n.toArray(arguments)),n.extend(this.elements,i),this.trigger(t.Events.change)},identity:function(){return this.set(s.Identity),this},multiply:function(e,i,r,s,a,o,l,h,c){if(1>=(d=(C=arguments).length))return n.each(this.elements,function(t,i){this.elements[i]=t*e},this),this.trigger(t.Events.change);if(3>=d)return e=e||0,i=i||0,r=r||0,{x:(a=this.elements)[0]*e+a[1]*i+a[2]*r,y:a[3]*e+a[4]*i+a[5]*r,z:a[6]*e+a[7]*i+a[8]*r};var d=(v=this.elements)[0],f=v[1],u=v[2],_=v[3],g=v[4],p=v[5],m=v[6],y=v[7],v=v[8],x=C[0],b=C[1],w=C[2],S=C[3],A=C[4],k=C[5],E=C[6],R=C[7],C=C[8];return this.elements[0]=d*x+f*S+u*E,this.elements[1]=d*b+f*A+u*R,this.elements[2]=d*w+f*k+u*C,this.elements[3]=_*x+g*S+p*E,this.elements[4]=_*b+g*A+p*R,this.elements[5]=_*w+g*k+p*C,this.elements[6]=m*x+y*S+v*E,this.elements[7]=m*b+y*A+v*R,this.elements[8]=m*w+y*k+v*C,this.trigger(t.Events.change)},inverse:function(e){var i=this.elements;e=e||new t.Matrix;var r=i[0],n=i[1],s=i[2],a=i[3],o=i[4],l=i[5],h=i[6],c=i[7],d=(i=i[8])*o-l*c,f=-i*a+l*h,u=c*a-o*h,_=r*d+n*f+s*u;return _?(_=1/_,e.elements[0]=d*_,e.elements[1]=(-i*n+s*c)*_,e.elements[2]=(l*n-s*o)*_,e.elements[3]=f*_,e.elements[4]=(i*r-s*h)*_,e.elements[5]=(-l*r+s*a)*_,e.elements[6]=u*_,e.elements[7]=(-c*r+n*h)*_,e.elements[8]=(o*r-n*a)*_,e):null},scale:function(t,e){return 1>=arguments.length&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var r=e(t);return t=i(t),this.multiply(r,-t,0,t,r,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){return t=r(t),this.multiply(1,t,0,0,1,0,0,0,1)},skewY:function(t){return t=r(t),this.multiply(1,0,0,t,1,0,0,0,1)},toString:function(t){var e=[];return this.toArray(t,e),e.join(" ")},toArray:function(t,e){var i=this.elements,r=!!e,n=parseFloat(i[0].toFixed(3)),s=parseFloat(i[1].toFixed(3)),a=parseFloat(i[2].toFixed(3)),o=parseFloat(i[3].toFixed(3)),l=parseFloat(i[4].toFixed(3)),h=parseFloat(i[5].toFixed(3));if(t){t=parseFloat(i[6].toFixed(3));var c=parseFloat(i[7].toFixed(3));i=parseFloat(i[8].toFixed(3));return r?(e[0]=n,e[1]=o,e[2]=t,e[3]=s,e[4]=l,e[5]=c,e[6]=a,e[7]=h,void(e[8]=i)):[n,o,t,s,l,c,a,h,i]}if(!r)return[n,o,s,l,a,h];e[0]=n,e[1]=o,e[2]=s,e[3]=l,e[4]=a,e[5]=h},clone:function(){var e=this.elements[0],i=this.elements[1],r=this.elements[2],n=this.elements[3],s=this.elements[4];return new t.Matrix(e,i,r,n,s,this.elements[5],this.elements[6],this.elements[7],this.elements[8])}})}((void 0!==e?e:this).Two),function(t){var e=t.Utils.mod,i=t.Utils.toFixed,r=t.Utils,n={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var i=document.createElementNS(n.ns,t);return"svg"===t&&(e=r.defaults(e||{},{version:n.version})),r.isEmpty(e)||n.setAttributes(i,e),i},setAttributes:function(t,e){for(var i=Object.keys(e),r=0;r<i.length;r++)/href/.test(i[r])?t.setAttributeNS(n.xlink,i[r],e[i[r]]):t.setAttribute(i[r],e[i[r]]);return this},removeAttributes:function(t,e){for(var i in e)t.removeAttribute(i);return this},toString:function(r,n){for(var s,a=r.length,o=a-1,l="",h=0;h<a;h++){var c=r[h],d=n?e(h-1,a):Math.max(h-1,0);n&&e(h+1,a);var f=r[d],u=i(c._x),_=i(c._y);switch(c._command){case t.Commands.close:var g=t.Commands.close;break;case t.Commands.curve:var p=f.controls&&f.controls.right||t.Vector.zero;if(g=c.controls&&c.controls.left||t.Vector.zero,f._relative?(d=i(p.x+f.x),f=i(p.y+f.y)):(d=i(p.x),f=i(p.y)),c._relative){p=i(g.x+c.x);var m=i(g.y+c.y)}else p=i(g.x),m=i(g.y);g=(0===h?t.Commands.move:t.Commands.curve)+" "+d+" "+f+" "+p+" "+m+" "+u+" "+_;break;case t.Commands.move:s=c,g=t.Commands.move+" "+u+" "+_;break;default:g=c._command+" "+u+" "+_}h>=o&&n&&(c._command===t.Commands.curve&&(_=s,f=c.controls&&c.controls.right||c,u=_.controls&&_.controls.left||_,c._relative?(d=i(f.x+c.x),f=i(f.y+c.y)):(d=i(f.x),f=i(f.y)),_._relative?(p=i(u.x+_.x),m=i(u.y+_.y)):(p=i(u.x),m=i(u.y)),g+=" C "+d+" "+f+" "+p+" "+m+" "+(u=i(_.x))+" "+(_=i(_.y))),g+=" Z"),l+=g+" "}return l},getClip:function(t){var e=t._renderer.clip;if(!e){for(var i=t;i.parent;)i=i.parent;e=t._renderer.clip=n.createElement("clipPath"),i.defs.appendChild(e)}return e},group:{appendChild:function(t){var e=t._renderer.elem;if(e){var i=e.nodeName;!i||/(radial|linear)gradient/i.test(i)||t._clip||this.elem.appendChild(e)}},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){n[t._renderer.type].render.call(t,this)},render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=n.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e={domElement:t,elem:this._renderer.elem};(this._matrix.manual||this._flagMatrix)&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var i=0;i<this.children.length;i++){var r=this.children[i];n[r._renderer.type].render.call(r,t)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagAdditions&&this.additions.forEach(n.group.appendChild,e),this._flagSubtractions&&this.subtractions.forEach(n.group.removeChild,e),this._flagOrder&&this.children.forEach(n.group.orderChild,e),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var i=n.toString(this._vertices,this._closed);e.d=i}return this._fill&&this._fill._renderer&&(this._fill._update(),n[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),n[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this._renderer.elem?n.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=n.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip&&(t=n.getClip(this),e=this._renderer.elem,this._clip?(e.removeAttribute("id"),t.setAttribute("id",this.id),t.appendChild(e)):(t.removeAttribute("id"),e.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(e))),this.flagReset()}},text:{render:function(t){this._update();var e={};return(this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=n.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),n[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),n[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._renderer.elem?n.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=n.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip&&(t=n.getClip(this),e=this._renderer.elem,this._clip?(e.removeAttribute("id"),t.setAttribute("id",this.id),t.appendChild(e)):(t.removeAttribute("id"),e.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(e))),this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){if(e||this._update(),e={},this._flagEndPoints&&(e.x1=this.left._x,e.y1=this.left._y,e.x2=this.right._x,e.y2=this.right._y),this._flagSpread&&(e.spreadMethod=this._spread),this._renderer.elem?n.setAttributes(this._renderer.elem,e):(e.id=this.id,e.gradientUnits="userSpaceOnUse",this._renderer.elem=n.createElement("linearGradient",e),t.defs.appendChild(this._renderer.elem)),this._flagStops)for((t=this._renderer.elem.childNodes.length!==this.stops.length)&&(this._renderer.elem.childNodes.length=0),e=0;e<this.stops.length;e++){var i=this.stops[e],r={};i._flagOffset&&(r.offset=100*i._offset+"%"),i._flagColor&&(r["stop-color"]=i._color),i._flagOpacity&&(r["stop-opacity"]=i._opacity),i._renderer.elem?n.setAttributes(i._renderer.elem,r):i._renderer.elem=n.createElement("stop",r),t&&this._renderer.elem.appendChild(i._renderer.elem),i.flagReset()}return this.flagReset()}},"radial-gradient":{render:function(t,e){if(e||this._update(),e={},this._flagCenter&&(e.cx=this.center._x,e.cy=this.center._y),this._flagFocal&&(e.fx=this.focal._x,e.fy=this.focal._y),this._flagRadius&&(e.r=this._radius),this._flagSpread&&(e.spreadMethod=this._spread),this._renderer.elem?n.setAttributes(this._renderer.elem,e):(e.id=this.id,e.gradientUnits="userSpaceOnUse",this._renderer.elem=n.createElement("radialGradient",e),t.defs.appendChild(this._renderer.elem)),this._flagStops)for((t=this._renderer.elem.childNodes.length!==this.stops.length)&&(this._renderer.elem.childNodes.length=0),e=0;e<this.stops.length;e++){var i=this.stops[e],r={};i._flagOffset&&(r.offset=100*i._offset+"%"),i._flagColor&&(r["stop-color"]=i._color),i._flagOpacity&&(r["stop-opacity"]=i._opacity),i._renderer.elem?n.setAttributes(i._renderer.elem,r):i._renderer.elem=n.createElement("stop",r),t&&this._renderer.elem.appendChild(i._renderer.elem),i.flagReset()}return this.flagReset()}},texture:{render:function(e,i){i||this._update(),i={};var s={x:0,y:0},a=this.image;if(this._flagLoaded&&this.loaded)switch(a.nodeName.toLowerCase()){case"canvas":s.href=s["xlink:href"]=a.toDataURL("image/png");break;case"img":case"image":s.href=s["xlink:href"]=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(i.x=this._offset.x,i.y=this._offset.y,a&&(i.x-=a.width/2,i.y-=a.height/2,this._scale instanceof t.Vector?(i.x*=this._scale.x,i.y*=this._scale.y):(i.x*=this._scale,i.y*=this._scale)),0<i.x&&(i.x*=-1),0<i.y&&(i.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(i.width=0,i.height=0,a)){switch(s.width=i.width=a.width,s.height=i.height=a.height,this._repeat){case"no-repeat":i.width+=1,i.height+=1}this._scale instanceof t.Vector?(i.width*=this._scale.x,i.height*=this._scale.y):(i.width*=this._scale,i.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?r.isEmpty(s)||n.setAttributes(this._renderer.image,s):this._renderer.image=n.createElement("image",s)),this._renderer.elem?r.isEmpty(i)||n.setAttributes(this._renderer.elem,i):(i.id=this.id,i.patternUnits="userSpaceOnUse",this._renderer.elem=n.createElement("pattern",i),e.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},s=t[t.Types.svg]=function(e){this.domElement=e.domElement||n.createElement("svg"),this.scene=new t.Group,this.scene.parent=this,this.defs=n.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"};r.extend(s,{Utils:n}),r.extend(s.prototype,t.Utils.Events,{setSize:function(t,e){return this.width=t,this.height=e,n.setAttributes(this.domElement,{width:t,height:e}),this},render:function(){return n.group.render.call(this.scene,this.domElement),this}})}((void 0!==e?e:this).Two),function(t){var e=t.Utils.mod,i=t.Utils.toFixed,r=t.Utils.getRatio,n=t.Utils,s=function(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]},a={isHidden:/(none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t){return t.tagName="canvas",t.nodeType=1,t},group:{renderChild:function(t){a[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){this._update();var e=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);i=s(e);var r=this._mask;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,i||(t.save(),t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),r&&a[r._renderer.type].render.call(r,t,!0),0<this.opacity&&0!==this.scale)for(e=0;e<this.children.length;e++)r=this.children[e],a[r._renderer.type].render.call(r,t);return i||t.restore(),this.flagReset()}},path:{render:function(r,o,l){this._update();var h=this._matrix.elements,c=this._stroke,d=this._linewidth,f=this._fill,u=this._opacity*this.parent._renderer.opacity,_=this._visible,g=this._cap,p=this._join,m=this._miter,y=this._closed,v=this._vertices,x=v.length,b=x-1,w=s(h),S=this._clip;if(!o&&(!_||S))return this;for(w||(r.save(),r.transform(h[0],h[3],h[1],h[4],h[2],h[5])),f&&(n.isString(f)?r.fillStyle=f:(a[f._renderer.type].render.call(f,r),r.fillStyle=f._renderer.effect)),c&&(n.isString(c)?r.strokeStyle=c:(a[c._renderer.type].render.call(c,r),r.strokeStyle=c._renderer.effect)),d&&(r.lineWidth=d),m&&(r.miterLimit=m),p&&(r.lineJoin=p),g&&(r.lineCap=g),n.isNumber(u)&&(r.globalAlpha=u),r.beginPath(),h=0;h<v.length;h++)switch(o=v[h],_=i(o._x),g=i(o._y),o._command){case t.Commands.close:r.closePath();break;case t.Commands.curve:u=y?e(h-1,x):Math.max(h-1,0),y&&e(h+1,x),m=(p=v[u]).controls&&p.controls.right||t.Vector.zero;var A=o.controls&&o.controls.left||t.Vector.zero;p._relative?(u=m.x+i(p._x),m=m.y+i(p._y)):(u=i(m.x),m=i(m.y)),o._relative?(p=A.x+i(o._x),A=A.y+i(o._y)):(p=i(A.x),A=i(A.y)),r.bezierCurveTo(u,m,p,A,_,g),h>=b&&y&&(g=k,p=o.controls&&o.controls.right||t.Vector.zero,_=g.controls&&g.controls.left||t.Vector.zero,o._relative?(u=p.x+i(o._x),m=p.y+i(o._y)):(u=i(p.x),m=i(p.y)),g._relative?(p=_.x+i(g._x),A=_.y+i(g._y)):(p=i(_.x),A=i(_.y)),_=i(g._x),g=i(g._y),r.bezierCurveTo(u,m,p,A,_,g));break;case t.Commands.line:r.lineTo(_,g);break;case t.Commands.move:var k=o;r.moveTo(_,g)}return y&&r.closePath(),S||l||(a.isHidden.test(f)||((y=f._renderer&&f._renderer.offset)&&(r.save(),r.translate(-f._renderer.offset.x,-f._renderer.offset.y),r.scale(f._renderer.scale.x,f._renderer.scale.y)),r.fill(),y&&r.restore()),a.isHidden.test(c)||((y=c._renderer&&c._renderer.offset)&&(r.save(),r.translate(-c._renderer.offset.x,-c._renderer.offset.y),r.scale(c._renderer.scale.x,c._renderer.scale.y),r.lineWidth=d/c._renderer.scale.x),r.stroke(),y&&r.restore())),w||r.restore(),S&&!l&&r.clip(),this.flagReset()}},text:{render:function(t,e,r){this._update();var o=this._matrix.elements,l=this._stroke,h=this._linewidth,c=this._fill,d=this._opacity*this.parent._renderer.opacity,f=this._visible,u=s(o),_=c._renderer&&c._renderer.offset&&l._renderer&&l._renderer.offset,g=this._clip;return e||f&&!g?(u||(t.save(),t.transform(o[0],o[3],o[1],o[4],o[2],o[5])),_||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=a.alignments[this._alignment]||this._alignment,t.textBaseline=this._baseline,c&&(n.isString(c)?t.fillStyle=c:(a[c._renderer.type].render.call(c,t),t.fillStyle=c._renderer.effect)),l&&(n.isString(l)?t.strokeStyle=l:(a[l._renderer.type].render.call(l,t),t.strokeStyle=l._renderer.effect)),h&&(t.lineWidth=h),n.isNumber(d)&&(t.globalAlpha=d),g||r||(a.isHidden.test(c)||(c._renderer&&c._renderer.offset?(e=i(c._renderer.scale.x),o=i(c._renderer.scale.y),t.save(),t.translate(-i(c._renderer.offset.x),-i(c._renderer.offset.y)),t.scale(e,o),e=this._size/c._renderer.scale.y,o=this._leading/c._renderer.scale.y,t.font=[this._style,this._weight,i(e)+"px/",i(o)+"px",this._family].join(" "),e=c._renderer.offset.x/c._renderer.scale.x,c=c._renderer.offset.y/c._renderer.scale.y,t.fillText(this.value,i(e),i(c)),t.restore()):t.fillText(this.value,0,0)),a.isHidden.test(l)||(l._renderer&&l._renderer.offset?(e=i(l._renderer.scale.x),o=i(l._renderer.scale.y),t.save(),t.translate(-i(l._renderer.offset.x),-i(l._renderer.offset.y)),t.scale(e,o),e=this._size/l._renderer.scale.y,o=this._leading/l._renderer.scale.y,t.font=[this._style,this._weight,i(e)+"px/",i(o)+"px",this._family].join(" "),e=l._renderer.offset.x/l._renderer.scale.x,c=l._renderer.offset.y/l._renderer.scale.y,l=h/l._renderer.scale.x,t.lineWidth=i(l),t.strokeText(this.value,i(e),i(c)),t.restore()):t.strokeText(this.value,0,0))),u||t.restore(),g&&!r&&t.clip(),this.flagReset()):this}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops)for(this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y),t=0;t<this.stops.length;t++){var e=this.stops[t];this._renderer.effect.addColorStop(e._offset,e._color)}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops)for(this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius),t=0;t<this.stops.length;t++){var e=this.stops[t];this._renderer.effect.addColorStop(e._offset,e._color)}return this.flagReset()}},texture:{render:function(e){this._update();var i=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=e.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof t.Vector||(this._renderer.offset=new t.Vector),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof t.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof t.Vector||(this._renderer.scale=new t.Vector),this._scale instanceof t.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},o=t[t.Types.canvas]=function(e){var i=!1!==e.smoothing;this.domElement=e.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=e.overdraw||!1,n.isUndefined(this.ctx.imageSmoothingEnabled)||(this.ctx.imageSmoothingEnabled=i),this.scene=new t.Group,this.scene.parent=this};n.extend(o,{Utils:a}),n.extend(o.prototype,t.Utils.Events,{setSize:function(t,e,i){return this.width=t,this.height=e,this.ratio=n.isUndefined(i)?r(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&n.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),a.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}})}((void 0!==e?e:this).Two),function(t){var e=t.root,i=t.Matrix.Multiply,r=t.Utils.mod,n=[1,0,0,0,1,0,0,0,1],s=new t.Array(9),a=t.Utils.getRatio,o=t.Utils.toFixed,l=t.Utils,h={isHidden:/(none|transparent)/i,canvas:e.document?e.document.createElement("canvas"):{getContext:l.identity},alignments:{left:"start",middle:"center",right:"end"},matrix:new t.Matrix,uv:new t.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{removeChild:function(t,e){if(t.children)for(var i=0;i<t.children.length;i++)h.group.removeChild(t.children[i],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},renderChild:function(t){h[t._renderer.type].render.call(t,this.gl,this.program)},render:function(e,r){this._update();var n=this.parent,a=n._matrix&&n._matrix.manual||n._flagMatrix,o=this._matrix.manual||this._flagMatrix;if((a||o)&&(this._renderer.matrix||(this._renderer.matrix=new t.Array(9)),this._matrix.toArray(!0,s),i(s,n._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*n._renderer.scale,a&&(this._flagMatrix=!0)),this._mask&&(e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,1),e.colorMask(!1,!1,!1,!0),e.stencilOp(e.KEEP,e.KEEP,e.INCR),h[this._mask._renderer.type].render.call(this._mask,e,r,this),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,1),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)),this._flagOpacity=n._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1),this._flagSubtractions)for(n=0;n<this.subtractions.length;n++)h.group.removeChild(this.subtractions[n],e);return this.children.forEach(h.group.renderChild,{gl:e,program:r}),this._mask&&(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),h[this._mask._renderer.type].render.call(this._mask,e,r,this),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,1),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.disable(e.STENCIL_TEST)),this.flagReset()}},path:{updateCanvas:function(e){var i=e._vertices,n=this.canvas,s=this.ctx,a=e._renderer.scale,c=e._stroke,d=e._linewidth,f=e._fill,u=e._renderer.opacity||e._opacity,_=e._cap,g=e._join,p=e._miter,m=e._closed,y=i.length,v=y-1;n.width=Math.max(Math.ceil(e._renderer.rect.width*a),1),n.height=Math.max(Math.ceil(e._renderer.rect.height*a),1);var x=(w=e._renderer.rect.centroid).x,w=w.y;for(s.clearRect(0,0,n.width,n.height),f&&(l.isString(f)?s.fillStyle=f:(h[f._renderer.type].render.call(f,s,e),s.fillStyle=f._renderer.effect)),c&&(l.isString(c)?s.strokeStyle=c:(h[c._renderer.type].render.call(c,s,e),s.strokeStyle=c._renderer.effect)),d&&(s.lineWidth=d),p&&(s.miterLimit=p),g&&(s.lineJoin=g),_&&(s.lineCap=_),l.isNumber(u)&&(s.globalAlpha=u),s.save(),s.scale(a,a),s.translate(x,w),s.beginPath(),e=0;e<i.length;e++)switch(b=i[e],a=o(b._x),u=o(b._y),b._command){case t.Commands.close:s.closePath();break;case t.Commands.curve:n=m?r(e-1,y):Math.max(e-1,0),m&&r(e+1,y),g=(_=i[n]).controls&&_.controls.right||t.Vector.zero,p=b.controls&&b.controls.left||t.Vector.zero,_._relative?(n=o(g.x+_._x),g=o(g.y+_._y)):(n=o(g.x),g=o(g.y)),b._relative?(_=o(p.x+b._x),p=o(p.y+b._y)):(_=o(p.x),p=o(p.y)),s.bezierCurveTo(n,g,_,p,a,u),e>=v&&m&&(u=S,_=b.controls&&b.controls.right||t.Vector.zero,a=u.controls&&u.controls.left||t.Vector.zero,b._relative?(n=o(_.x+b._x),g=o(_.y+b._y)):(n=o(_.x),g=o(_.y)),u._relative?(_=o(a.x+u._x),p=o(a.y+u._y)):(_=o(a.x),p=o(a.y)),a=o(u._x),u=o(u._y),s.bezierCurveTo(n,g,_,p,a,u));break;case t.Commands.line:s.lineTo(a,u);break;case t.Commands.move:var S=b;s.moveTo(a,u)}m&&s.closePath(),h.isHidden.test(f)||((i=f._renderer&&f._renderer.offset)&&(s.save(),s.translate(-f._renderer.offset.x,-f._renderer.offset.y),s.scale(f._renderer.scale.x,f._renderer.scale.y)),s.fill(),i&&s.restore()),h.isHidden.test(c)||((i=c._renderer&&c._renderer.offset)&&(s.save(),s.translate(-c._renderer.offset.x,-c._renderer.offset.y),s.scale(c._renderer.scale.x,c._renderer.scale.y),s.lineWidth=d/c._renderer.scale.x),s.stroke(),i&&s.restore()),s.restore()},getBoundingClientRect:function(t,e,i){var r=1/0,n=-1/0,s=1/0,a=-1/0;t.forEach(function(t){var e=t.x,i=t.y,o=t.controls;if(s=Math.min(i,s),r=Math.min(e,r),n=Math.max(e,n),a=Math.max(i,a),t.controls){var l=o.left,h=o.right;l&&h&&(o=t._relative?l.x+e:l.x,l=t._relative?l.y+i:l.y,e=t._relative?h.x+e:h.x,t=t._relative?h.y+i:h.y,o&&l&&e&&t&&(s=Math.min(l,t,s),r=Math.min(o,e,r),n=Math.max(o,e,n),a=Math.max(l,t,a)))}}),l.isNumber(e)&&(s-=e,r-=e,n+=e,a+=e),i.top=s,i.left=r,i.right=n,i.bottom=a,i.width=n-r,i.height=a-s,i.centroid||(i.centroid={}),i.centroid.x=-r,i.centroid.y=-s},render:function(e,r,n){if(!this._visible||!this._opacity)return this;this._update();var a=this.parent,o=this._matrix.manual||this._flagMatrix,l=this._flagVertices||this._flagFill||this._fill instanceof t.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof t.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof t.Texture&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof t.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof t.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof t.Texture&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||a._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||!this._renderer.texture;return(a._matrix.manual||a._flagMatrix||o)&&(this._renderer.matrix||(this._renderer.matrix=new t.Array(9)),this._matrix.toArray(!0,s),i(s,a._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*a._renderer.scale),l&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new t.Array(12)),this._renderer.opacity=this._opacity*a._renderer.opacity,h.path.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),h.getTriangles(this._renderer.rect,this._renderer.triangles),h.updateBuffer.call(h,e,this,r),h.updateTexture.call(h,e,this)),!this._clip||n?(e.bindBuffer(e.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),e.vertexAttribPointer(r.textureCoords,2,e.FLOAT,!1,0,0),e.bindTexture(e.TEXTURE_2D,this._renderer.texture),e.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),e.bindBuffer(e.ARRAY_BUFFER,this._renderer.buffer),e.vertexAttribPointer(r.position,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6),this.flagReset()):void 0}},text:{updateCanvas:function(t){var e=this.canvas,i=this.ctx,r=t._renderer.scale,n=t._stroke,s=t._linewidth*r,a=t._fill,c=t._renderer.opacity||t._opacity;e.width=Math.max(Math.ceil(t._renderer.rect.width*r),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*r),1);var d=(f=t._renderer.rect.centroid).x,f=f.y,u=a._renderer&&a._renderer.offset&&n._renderer&&n._renderer.offset;i.clearRect(0,0,e.width,e.height),u||(i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),i.textAlign="center",i.textBaseline="middle",a&&(l.isString(a)?i.fillStyle=a:(h[a._renderer.type].render.call(a,i,t),i.fillStyle=a._renderer.effect)),n&&(l.isString(n)?i.strokeStyle=n:(h[n._renderer.type].render.call(n,i,t),i.strokeStyle=n._renderer.effect)),s&&(i.lineWidth=s),l.isNumber(c)&&(i.globalAlpha=c),i.save(),i.scale(r,r),i.translate(d,f),h.isHidden.test(a)||(a._renderer&&a._renderer.offset?(e=o(a._renderer.scale.x),r=o(a._renderer.scale.y),i.save(),i.translate(-o(a._renderer.offset.x),-o(a._renderer.offset.y)),i.scale(e,r),e=t._size/a._renderer.scale.y,r=t._leading/a._renderer.scale.y,i.font=[t._style,t._weight,o(e)+"px/",o(r)+"px",t._family].join(" "),e=a._renderer.offset.x/a._renderer.scale.x,a=a._renderer.offset.y/a._renderer.scale.y,i.fillText(t.value,o(e),o(a)),i.restore()):i.fillText(t.value,0,0)),h.isHidden.test(n)||(n._renderer&&n._renderer.offset?(e=o(n._renderer.scale.x),r=o(n._renderer.scale.y),i.save(),i.translate(-o(n._renderer.offset.x),-o(n._renderer.offset.y)),i.scale(e,r),e=t._size/n._renderer.scale.y,r=t._leading/n._renderer.scale.y,i.font=[t._style,t._weight,o(e)+"px/",o(r)+"px",t._family].join(" "),e=n._renderer.offset.x/n._renderer.scale.x,a=n._renderer.offset.y/n._renderer.scale.y,n=s/n._renderer.scale.x,i.lineWidth=o(n),i.strokeText(t.value,o(e),o(a)),i.restore()):i.strokeText(t.value,0,0)),i.restore()},getBoundingClientRect:function(t,e){(i=h.ctx).font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),i.textAlign="center",i.textBaseline=t._baseline;var i=i.measureText(t._value).width,r=Math.max(t._size||t._leading);this._linewidth&&!h.isHidden.test(this._stroke)&&(r+=this._linewidth);var n=i/2,s=r/2;switch(h.alignments[t._alignment]||t._alignment){case h.alignments.left:e.left=0,e.right=i;break;case h.alignments.right:e.left=-i,e.right=0;break;default:e.left=-n,e.right=n}switch(t._baseline){case"bottom":e.top=-r,e.bottom=0;break;case"top":e.top=0,e.bottom=r;break;default:e.top=-s,e.bottom=s}e.width=i,e.height=r,e.centroid||(e.centroid={}),e.centroid.x=n,e.centroid.y=s},render:function(e,r,n){if(!this._visible||!this._opacity)return this;this._update();var a=this.parent,o=this._matrix.manual||this._flagMatrix,l=this._flagVertices||this._flagFill||this._fill instanceof t.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof t.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof t.Texture&&this._fill._flagLoaded&&this._fill.loaded||this._stroke instanceof t.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof t.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._texture instanceof t.Texture&&this._texture._flagLoaded&&this._texture.loaded||this._flagStroke||this._flagLinewidth||this._flagOpacity||a._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||!this._renderer.texture;return(a._matrix.manual||a._flagMatrix||o)&&(this._renderer.matrix||(this._renderer.matrix=new t.Array(9)),this._matrix.toArray(!0,s),i(s,a._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*a._renderer.scale),l&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new t.Array(12)),this._renderer.opacity=this._opacity*a._renderer.opacity,h.text.getBoundingClientRect(this,this._renderer.rect),h.getTriangles(this._renderer.rect,this._renderer.triangles),h.updateBuffer.call(h,e,this,r),h.updateTexture.call(h,e,this)),!this._clip||n?(e.bindBuffer(e.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),e.vertexAttribPointer(r.textureCoords,2,e.FLOAT,!1,0,0),e.bindTexture(e.TEXTURE_2D,this._renderer.texture),e.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),e.bindBuffer(e.ARRAY_BUFFER,this._renderer.buffer),e.vertexAttribPointer(r.position,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6),this.flagReset()):void 0}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops)for(this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y),t=0;t<this.stops.length;t++)e=this.stops[t],this._renderer.effect.addColorStop(e._offset,e._color);return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops)for(this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius),t=0;t<this.stops.length;t++)e=this.stops[t],this._renderer.effect.addColorStop(e._offset,e._color);return this.flagReset()}}},texture:{render:function(e,i){if(e.canvas.getContext("2d"))return this._update(),i=this.image,(!this._renderer.effect||(this._flagLoaded||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=e.createPattern(i,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof t.Vector||(this._renderer.offset=new t.Vector),this._renderer.offset.x=this._offset.x,this._renderer.offset.y=this._offset.y,i&&(this._renderer.offset.x-=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof t.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof t.Vector||(this._renderer.scale=new t.Vector),this._scale instanceof t.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},getTriangles:function(t,e){var i=t.top,r=t.left,n=t.right;t=t.bottom,e[0]=r,e[1]=i,e[2]=n,e[3]=i,e[4]=r,e[5]=t,e[6]=r,e[7]=t,e[8]=n,e[9]=i,e[10]=n,e[11]=t},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(h,e),e._renderer.texture&&t.deleteTexture(e._renderer.texture),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.textureCoordsBuffer),e._renderer.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),0>=this.canvas.width||0>=this.canvas.height||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(t,e,i){l.isObject(e._renderer.buffer)&&t.deleteBuffer(e._renderer.buffer),e._renderer.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.buffer),t.enableVertexAttribArray(i.position),t.bufferData(t.ARRAY_BUFFER,e._renderer.triangles,t.STATIC_DRAW),l.isObject(e._renderer.textureCoordsBuffer)&&t.deleteBuffer(e._renderer.textureCoordsBuffer),e._renderer.textureCoordsBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.textureCoordsBuffer),t.enableVertexAttribArray(i.textureCoords),t.bufferData(t.ARRAY_BUFFER,this.uv,t.STATIC_DRAW)},program:{create:function(e,i){var r=e.createProgram();if(l.each(i,function(t){e.attachShader(r,t)}),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw i=e.getProgramInfoLog(r),e.deleteProgram(r),new t.Utils.Error("unable to link program: "+i);return r}},shaders:{create:function(e,i,r){if(r=e.createShader(e[r]),e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw i=e.getShaderInfoLog(r),e.deleteShader(r),new t.Utils.Error("unable to compile shader "+r+": "+i);return r},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"},TextureRegistry:new t.Registry};h.ctx=h.canvas.getContext("2d"),e=t[t.Types.webgl]=function(e){if(this.domElement=e.domElement||document.createElement("canvas"),this.scene=new t.Group,this.scene.parent=this,this._renderer={matrix:new t.Array(n),scale:1,opacity:1},this._flagMatrix=!0,e=l.defaults(e||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=e.overdraw,e=this.ctx=this.domElement.getContext("webgl",e)||this.domElement.getContext("experimental-webgl",e),!this.ctx)throw new t.Utils.Error("unable to create a webgl context. Try using another renderer.");var i=h.shaders.create(e,h.shaders.vertex,h.shaders.types.vertex),r=h.shaders.create(e,h.shaders.fragment,h.shaders.types.fragment);this.program=h.program.create(e,[i,r]),e.useProgram(this.program),this.program.position=e.getAttribLocation(this.program,"a_position"),this.program.matrix=e.getUniformLocation(this.program,"u_matrix"),this.program.textureCoords=e.getAttribLocation(this.program,"a_textureCoords"),e.disable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)},l.extend(e,{Utils:h}),l.extend(e.prototype,t.Utils.Events,{setSize:function(t,e,i){return this.width=t,this.height=e,this.ratio=l.isUndefined(i)?a(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,l.extend(this.domElement.style,{width:t+"px",height:e+"px"}),t*=this.ratio,e*=this.ratio,this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t,e),i=this.ctx.getUniformLocation(this.program,"u_resolution"),this.ctx.uniform2f(i,t,e),this},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),h.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}})}((void 0!==e?e:this).Two),function(t){var e=t.Utils,i=t.Shape=function(){this._renderer={},this._renderer.flagMatrix=e.bind(i.FlagMatrix,this),this.isShape=!0,this.id=t.Identifier+t.uniqueId(),this.classList=[],this._matrix=new t.Matrix,this.translation=new t.Vector,this.rotation=0,this.scale=1};e.extend(i,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(e){Object.defineProperty(e,"translation",{enumerable:!0,get:function(){return this._translation},set:function(e){this._translation&&this._translation.unbind(t.Events.change,this._renderer.flagMatrix),this._translation=e,this._translation.bind(t.Events.change,this._renderer.flagMatrix),i.FlagMatrix.call(this)}}),Object.defineProperty(e,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(e,"scale",{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof t.Vector&&this._scale.unbind(t.Events.change,this._renderer.flagMatrix),this._scale=e,this._scale instanceof t.Vector&&this._scale.bind(t.Events.change,this._renderer.flagMatrix),this._flagScale=this._flagMatrix=!0}})}}),e.extend(i.prototype,t.Utils.Events,{_flagMatrix:!0,_flagScale:!1,_rotation:0,_scale:1,_translation:null,addTo:function(t){return t.add(this),this},clone:function(){var t=new i;return t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,e.each(i.Properties,function(e){t[e]=this[e]},this),t._update()},_update:function(e){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof t.Vector?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),e&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=!1,this}}),i.MakeObservable(i.prototype)}((void 0!==e?e:this).Two),function(t){function e(e,i,r){var n=i.controls&&i.controls.right,s=e.controls&&e.controls.left,a=i.x,o=i.y,l=(n||i).x,h=(n||i).y,c=(s||e).x,d=(s||e).y,f=e.x,u=e.y;return n&&i._relative&&(l+=i.x,h+=i.y),s&&e._relative&&(c+=e.x,d+=e.y),t.Utils.getCurveLength(a,o,l,h,c,d,f,u,r)}function i(e,i,r){var n=i.controls&&i.controls.right,s=e.controls&&e.controls.left,a=i.x,o=i.y,l=(n||i).x,h=(n||i).y,c=(s||e).x,d=(s||e).y,f=e.x,u=e.y;return n&&i._relative&&(l+=i.x,h+=i.y),s&&e._relative&&(c+=e.x,d+=e.y),t.Utils.subdivide(a,o,l,h,c,d,f,u,r)}var r=Math.min,n=Math.max,s=Math.round,a=t.Utils.getComputedMatrix,o=t.Utils;o.each(t.Commands,function(t,e){});var l=t.Path=function(e,i,r,n){t.Shape.call(this),this._renderer.type="path",this._renderer.flagVertices=o.bind(l.FlagVertices,this),this._renderer.bindVertices=o.bind(l.BindVertices,this),this._renderer.unbindVertices=o.bind(l.UnbindVertices,this),this._renderer.flagFill=o.bind(l.FlagFill,this),this._renderer.flagStroke=o.bind(l.FlagStroke,this),this._closed=!!i,this._curved=!!r,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.opacity=this.linewidth=1,this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this._vertices=[],this.vertices=e,this.automatic=!n};o.extend(l,{Properties:"fill stroke linewidth opacity visible cap join miter closed curved automatic beginning ending".split(" "),FlagVertices:function(){this._flagLength=this._flagVertices=!0},BindVertices:function(e){for(var i=e.length;i--;)e[i].bind(t.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(e){for(var i=e.length;i--;)e[i].unbind(t.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(e){t.Shape.MakeObservable(e),o.each(l.Properties.slice(2,8),t.Utils.defineProperty,e),Object.defineProperty(e,"fill",{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof t.Gradient||this._fill instanceof t.LinearGradient||this._fill instanceof t.RadialGradient||this._fill instanceof t.Texture)&&this._fill.unbind(t.Events.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof t.Gradient||this._fill instanceof t.LinearGradient||this._fill instanceof t.RadialGradient||this._fill instanceof t.Texture)&&this._fill.bind(t.Events.change,this._renderer.flagFill)}}),Object.defineProperty(e,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof t.Gradient||this._stroke instanceof t.LinearGradient||this._stroke instanceof t.RadialGradient||this._stroke instanceof t.Texture)&&this._stroke.unbind(t.Events.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof t.Gradient||this._stroke instanceof t.LinearGradient||this._stroke instanceof t.RadialGradient||this._stroke instanceof t.Texture)&&this._stroke.bind(t.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(e,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(e,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(e,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(e,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){var e=(this._automatic=!!t)?"ignore":"listen";o.each(this.vertices,function(t){t[e]()})}}}),Object.defineProperty(e,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(e,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(e,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(e){var i=this._renderer.bindVertices,r=this._renderer.unbindVertices;this._collection&&this._collection.unbind(t.Events.insert,i).unbind(t.Events.remove,r),this._collection=new t.Utils.Collection((e||[]).slice(0)),this._collection.bind(t.Events.insert,i).bind(t.Events.remove,r),i(this._collection)}}),Object.defineProperty(e,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}})}}),o.extend(l.prototype,t.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,clone:function(e){e=e||this.parent;var i=o.map(this.vertices,function(t){return t.clone()}),r=new l(i,this.closed,this.curved,!this.automatic);return o.each(t.Path.Properties,function(t){r[t]=this[t]},this),r.translation.copy(this.translation),r.rotation=this.rotation,r.scale=this.scale,e&&e.add(r),r},toObject:function(){var e={vertices:o.map(this.vertices,function(t){return t.toObject()})};return o.each(t.Shape.Properties,function(t){e[t]=this[t]},this),e.translation=this.translation.toObject,e.rotation=this.rotation,e.scale=this.scale,e},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke="transparent",this},corner:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},o.each(this.vertices,function(e){e.addSelf(t.centroid)}),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},o.each(this.vertices,function(e){e.subSelf(t.centroid)}),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){var e,i=1/0,s=-1/0,o=1/0,l=-1/0;this._update(!0),t=t?this._matrix:a(this);var h=this.linewidth/2,c=this._vertices.length;if(0>=c){var d=t.multiply(0,0,1);return{top:d.y,left:d.x,right:d.x,bottom:d.y,width:0,height:0}}for(e=0;e<c;e++){var f=(d=this._vertices[e]).x;d=d.y,d=t.multiply(f,d,1),o=r(d.y-h,o),i=r(d.x-h,i),s=n(d.x+h,s),l=n(d.y+h,l)}return{top:o,left:i,right:s,bottom:l,width:s-i,height:l-o}},getPointAt:function(e,i){var r,n,s=this.length*Math.min(Math.max(e,0),1),a=this.vertices.length,l=a-1,h=r=null,c=0,d=this._lengths.length;for(n=0;c<d;c++){if(n+this._lengths[c]>=s){this._closed?(r=t.Utils.mod(c,a),h=t.Utils.mod(c-1,a),0===c&&(r=h,h=c)):(r=c,h=Math.min(Math.max(c-1,0),l)),r=this.vertices[r],h=this.vertices[h],s-=n,0!==this._lengths[c]&&(e=s/this._lengths[c]);break}n+=this._lengths[c]}if(o.isNull(r)||o.isNull(h))return null;var f=h.controls&&h.controls.right,u=r.controls&&r.controls.left;l=h.x,s=h.y,d=(f||h).x,c=(f||h).y;var _=(u||r).x;n=(u||r).y;var g=r.x;return a=r.y,f&&h._relative&&(d+=h.x,c+=h.y),u&&r._relative&&(_+=r.x,n+=r.y),r=t.Utils.getPointOnCubicBezier(e,l,d,_,g),e=t.Utils.getPointOnCubicBezier(e,s,c,n,a),o.isObject(i)?(i.x=r,i.y=e,i):new t.Vector(r,e)},plot:function(){if(this.curved)return t.Utils.getCurveFromPoints(this._vertices,this.closed),this;for(var e=0;e<this._vertices.length;e++)this._vertices[e]._command=0===e?t.Commands.move:t.Commands.line;return this},subdivide:function(e){this._update();var r=this.vertices.length-1,n=this.vertices[r],s=this._closed||this.vertices[r]._command===t.Commands.close,a=[];return o.each(this.vertices,function(l,h){if(!(0>=h)||s)if(l.command===t.Commands.move)a.push(new t.Anchor(n.x,n.y)),0<h&&(a[a.length-1].command=t.Commands.line);else{var c=i(l,n,e);a=a.concat(c),o.each(c,function(e,i){e.command=0>=i&&n.command===t.Commands.move?t.Commands.move:t.Commands.line}),h>=r&&(this._closed&&this._automatic?(c=i(l,n=l,e),a=a.concat(c),o.each(c,function(e,i){e.command=0>=i&&n.command===t.Commands.move?t.Commands.move:t.Commands.line})):s&&a.push(new t.Anchor(l.x,l.y)),a[a.length-1].command=s?t.Commands.close:t.Commands.line)}n=l},this),this._curved=this._automatic=!1,this.vertices=a,this},_updateLength:function(i){this._update();var r=this.vertices.length,n=r-1,s=this.vertices[n],a=this._closed||this.vertices[n]._command===t.Commands.close,l=0;return o.isUndefined(this._lengths)&&(this._lengths=[]),o.each(this.vertices,function(o,h){0>=h&&!a||o.command===t.Commands.move?(s=o,this._lengths[h]=0):(this._lengths[h]=e(o,s,i),l+=this._lengths[h],h>=n&&a&&(s=this.vertices[(h+1)%r],this._lengths[h+1]=e(o,s,i),l+=this._lengths[h+1]),s=o)},this),this._length=l,this},_update:function(){if(this._flagVertices){var e=this.vertices.length-1,i=s(this._beginning*e);e=s(this._ending*e),this._vertices.length=0;for(var r=i;r<e+1;r++)i=this.vertices[r],this._vertices.push(i);this._automatic&&this.plot()}return t.Shape.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,t.Shape.prototype.flagReset.call(this),this}}),l.MakeObservable(l.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Path,i=t.Utils,r=t.Line=function(i,r,n,s){n=(n-i)/2,s=(s-r)/2,e.call(this,[new t.Anchor(-n,-s),new t.Anchor(n,s)]),this.translation.set(i+n,r+s)};i.extend(r.prototype,e.prototype),e.MakeObservable(r.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Path,i=t.Utils,r=t.Rectangle=function(i,r,n,s){e.call(this,[new t.Anchor,new t.Anchor,new t.Anchor,new t.Anchor],!0),this.width=n,this.height=s,this._update(),this.translation.set(i,r)};i.extend(r,{Properties:["width","height"],MakeObservable:function(n){e.MakeObservable(n),i.each(r.Properties,t.Utils.defineProperty,n)}}),i.extend(r.prototype,e.prototype,{_width:0,_height:0,_flagWidth:0,_flagHeight:0,_update:function(){if(this._flagWidth||this._flagHeight){var t=this._width/2,i=this._height/2;this.vertices[0].set(-t,-i),this.vertices[1].set(t,-i),this.vertices[2].set(t,i),this.vertices[3].set(-t,i)}return e.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,e.prototype.flagReset.call(this),this}}),r.MakeObservable(r.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Path,i=2*Math.PI,r=Math.cos,n=Math.sin,s=t.Utils,a=t.Ellipse=function(i,r,n,a){s.isNumber(a)||(a=n);var o=s.map(s.range(t.Resolution),function(e){return new t.Anchor},this);e.call(this,o,!0,!0),this.width=2*n,this.height=2*a,this._update(),this.translation.set(i,r)};s.extend(a,{Properties:["width","height"],MakeObservable:function(i){e.MakeObservable(i),s.each(a.Properties,t.Utils.defineProperty,i)}}),s.extend(a.prototype,e.prototype,{_width:0,_height:0,_flagWidth:!1,_flagHeight:!1,_update:function(){if(this._flagWidth||this._flagHeight)for(var t=0,s=this.vertices.length;t<s;t++){var a=t/s*i,o=this._width*r(a)/2;a=this._height*n(a)/2;this.vertices[t].set(o,a)}return e.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,e.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Path,i=2*Math.PI,r=Math.cos,n=Math.sin,s=t.Utils,a=t.Circle=function(i,r,n){var a=s.map(s.range(t.Resolution),function(e){return new t.Anchor},this);e.call(this,a,!0,!0),this.radius=n,this._update(),this.translation.set(i,r)};s.extend(a,{Properties:["radius"],MakeObservable:function(i){e.MakeObservable(i),s.each(a.Properties,t.Utils.defineProperty,i)}}),s.extend(a.prototype,e.prototype,{_radius:0,_flagRadius:!1,_update:function(){if(this._flagRadius)for(var t=0,s=this.vertices.length;t<s;t++){var a=t/s*i,o=this._radius*r(a);a=this._radius*n(a);this.vertices[t].set(o,a)}return e.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,e.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Path,i=2*Math.PI,r=Math.cos,n=Math.sin,s=t.Utils,a=t.Polygon=function(i,r,n,a){a=Math.max(a||0,3);var o=s.map(s.range(a),function(e){return new t.Anchor});e.call(this,o,!0),this.width=2*n,this.height=2*n,this.sides=a,this._update(),this.translation.set(i,r)};s.extend(a,{Properties:["width","height","sides"],MakeObservable:function(i){e.MakeObservable(i),s.each(a.Properties,t.Utils.defineProperty,i)}}),s.extend(a.prototype,e.prototype,{_width:0,_height:0,_sides:0,_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var s=this._sides,a=this.vertices.length;a>s&&this.vertices.splice(s-1,a-s);for(var o=0;o<s;o++){var l=(o+.5)/s*i+Math.PI/2,h=this._width*r(l);l=this._height*n(l);o>=a?this.vertices.push(new t.Anchor(h,l)):this.vertices[o].set(h,l)}}return e.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,e.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}((void 0!==e?e:this).Two),function(t){function e(t,e){for(;0>t;)t+=e;return t%e}var i=t.Path,r=2*Math.PI,n=Math.PI/2,s=t.Utils,a=t.ArcSegment=function(e,r,n,a,o,l,h){h=s.map(s.range(h||3*t.Resolution),function(){return new t.Anchor}),i.call(this,h,!1,!1,!0),this.innerRadius=n,this.outerRadius=a,this.startAngle=o,this.endAngle=l,this._update(),this.translation.set(e,r)};s.extend(a,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(e){i.MakeObservable(e),s.each(a.Properties,t.Utils.defineProperty,e)}}),s.extend(a.prototype,i.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:r,_innerRadius:0,_outerRadius:0,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var s=this._startAngle,a=this._endAngle,o=this._innerRadius,l=this._outerRadius,h=e(s,r)===e(a,r),c=0<o,d=this.vertices,f=c?d.length/2:d.length,u=0;h?f--:c||(f-=2);for(var _=0,g=f-1;_<f;_++){var p=_/g,m=d[u];p=p*(a-s)+s;var y=(a-s)/f,v=l*Math.cos(p),x=l*Math.sin(p);switch(_){case 0:var b=t.Commands.move;break;default:b=t.Commands.curve}m.command=b,m.x=v,m.y=x,m.controls.left.clear(),m.controls.right.clear(),m.command===t.Commands.curve&&(x=l*y/Math.PI,m.controls.left.x=x*Math.cos(p-n),m.controls.left.y=x*Math.sin(p-n),m.controls.right.x=x*Math.cos(p+n),m.controls.right.y=x*Math.sin(p+n),1===_&&m.controls.left.multiplyScalar(2),_===g&&m.controls.right.multiplyScalar(2)),u++}if(c)for(h?(d[u].command=t.Commands.close,u++):g=--f-1,_=0;_<f;_++)p=_/g,m=d[u],p=(1-p)*(a-s)+s,y=(a-s)/f,v=o*Math.cos(p),x=o*Math.sin(p),b=t.Commands.curve,0>=_&&(b=h?t.Commands.move:t.Commands.line),m.command=b,m.x=v,m.y=x,m.controls.left.clear(),m.controls.right.clear(),m.command===t.Commands.curve&&(x=o*y/Math.PI,m.controls.left.x=x*Math.cos(p+n),m.controls.left.y=x*Math.sin(p+n),m.controls.right.x=x*Math.cos(p-n),m.controls.right.y=x*Math.sin(p-n),1===_&&m.controls.left.multiplyScalar(2),_===g&&m.controls.right.multiplyScalar(2)),u++;else h||(d[u].command=t.Commands.line,d[u].x=0,d[u].y=0,u++);d[u].command=t.Commands.close}return i.prototype._update.call(this),this},flagReset:function(){return i.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}}),a.MakeObservable(a.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Path,i=2*Math.PI,r=Math.cos,n=Math.sin,s=t.Utils,a=t.Star=function(i,r,n,a,o){s.isNumber(a)||(a=n/2),(!s.isNumber(o)||0>=o)&&(o=5);var l=s.map(s.range(2*o),function(e){return new t.Anchor});e.call(this,l,!0),this.innerRadius=a,this.outerRadius=n,this.sides=o,this._update(),this.translation.set(i,r)};s.extend(a,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(i){e.MakeObservable(i),s.each(a.Properties,t.Utils.defineProperty,i)}}),s.extend(a.prototype,e.prototype,{_innerRadius:0,_outerRadius:0,_sides:0,_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var s=2*this._sides,a=this.vertices.length;a>s&&this.vertices.splice(s-1,a-s);for(var o=0;o<s;o++){var l=(o+.5)/s*i,h=o%2?this._innerRadius:this._outerRadius,c=h*r(l);l=h*n(l);o>=a?this.vertices.push(new t.Anchor(c,l)):this.vertices[o].set(c,l)}}return e.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,e.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Path,i=t.Utils,r=t.RoundedRectangle=function(r,n,s,a,o){i.isNumber(o)||(o=Math.floor(Math.min(s,a)/12));var l=i.map(i.range(10),function(e){return new t.Anchor(0,0,0,0,0,0,0===e?t.Commands.move:t.Commands.curve)});l[l.length-1].command=t.Commands.close,e.call(this,l,!1,!1,!0),this.width=s,this.height=a,this.radius=o,this._update(),this.translation.set(r,n)};i.extend(r,{Properties:["width","height","radius"],MakeObservable:function(n){e.MakeObservable(n),i.each(r.Properties,t.Utils.defineProperty,n)}}),i.extend(r.prototype,e.prototype,{_width:0,_height:0,_radius:0,_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var t=this._width,i=this._height,r=Math.min(Math.max(this._radius,0),Math.min(t,i)),n=(t=t/2,i/2);(i=this.vertices[0]).x=-(t-r),i.y=-n,(i=this.vertices[1]).x=t-r,i.y=-n,i.controls.left.clear(),i.controls.right.x=r,i.controls.right.y=0,(i=this.vertices[2]).x=t,i.y=-(n-r),i.controls.right.clear(),i.controls.left.clear(),(i=this.vertices[3]).x=t,i.y=n-r,i.controls.left.clear(),i.controls.right.x=0,i.controls.right.y=r,(i=this.vertices[4]).x=t-r,i.y=n,i.controls.right.clear(),i.controls.left.clear(),(i=this.vertices[5]).x=-(t-r),i.y=n,i.controls.left.clear(),i.controls.right.x=-r,i.controls.right.y=0,(i=this.vertices[6]).x=-t,i.y=n-r,i.controls.left.clear(),i.controls.right.clear(),(i=this.vertices[7]).x=-t,i.y=-(n-r),i.controls.left.clear(),i.controls.right.x=0,i.controls.right.y=-r,(i=this.vertices[8]).x=-(t-r),i.y=-n,i.controls.left.clear(),i.controls.right.clear(),(i=this.vertices[9]).copy(this.vertices[8])}return e.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,e.prototype.flagReset.call(this),this}}),r.MakeObservable(r.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.root,i=t.Utils.getComputedMatrix,r=t.Utils;(e.document?e.document.createElement("canvas"):{getContext:r.identity}).getContext("2d");var n=t.Text=function(e,i,s,a){if(t.Shape.call(this),this._renderer.type="text",this._renderer.flagFill=r.bind(n.FlagFill,this),this._renderer.flagStroke=r.bind(n.FlagStroke,this),this.value=e,r.isNumber(i)&&(this.translation.x=i),r.isNumber(s)&&(this.translation.y=s),!r.isObject(a))return this;r.each(t.Text.Properties,function(t){t in a&&(this[t]=a[t])},this)};r.extend(t.Text,{Properties:"value family size leading alignment linewidth style weight decoration baseline opacity visible fill stroke".split(" "),FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(e){t.Shape.MakeObservable(e),r.each(t.Text.Properties.slice(0,12),t.Utils.defineProperty,e),Object.defineProperty(e,"fill",{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof t.Gradient||this._fill instanceof t.LinearGradient||this._fill instanceof t.RadialGradient||this._fill instanceof t.Texture)&&this._fill.unbind(t.Events.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof t.Gradient||this._fill instanceof t.LinearGradient||this._fill instanceof t.RadialGradient||this._fill instanceof t.Texture)&&this._fill.bind(t.Events.change,this._renderer.flagFill)}}),Object.defineProperty(e,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof t.Gradient||this._stroke instanceof t.LinearGradient||this._stroke instanceof t.RadialGradient||this._stroke instanceof t.Texture)&&this._stroke.unbind(t.Events.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof t.Gradient||this._stroke instanceof t.LinearGradient||this._stroke instanceof t.RadialGradient||this._stroke instanceof t.Texture)&&this._stroke.bind(t.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(e,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}})}}),r.extend(t.Text.prototype,t.Shape.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_visible:!0,_clip:!1,remove:function(){return this.parent?(this.parent.remove(this),this):this},clone:function(e){e=e||this.parent;var i=new t.Text(this.value);return i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,r.each(t.Text.Properties,function(t){i[t]=this[t]},this),e&&e.add(i),i},toObject:function(){var e={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return r.each(t.Text.Properties,function(t){e[t]=this[t]},this),e},noStroke:function(){return this.stroke="transparent",this},noFill:function(){return this.fill="transparent",this},getBoundingClientRect:function(t){return this._update(!0),{top:(t=(t?this._matrix:i(this)).multiply(0,0,1)).x,left:t.y,right:t.x,bottom:t.y,width:0,height:0}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpaicty=this._flagVisible=this._flagClip=this._flagDecoration=this._flagBaseline=!1,t.Shape.prototype.flagReset.call(this),this}}),t.Text.MakeObservable(t.Text.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Utils,i=t.Stop=function(t,r,n){this._renderer={},this._renderer.type="stop",this.offset=e.isNumber(t)?t:0>=i.Index?0:1,this.opacity=e.isNumber(n)?n:1,this.color=e.isString(r)?r:0>=i.Index?"#fff":"#000",i.Index=(i.Index+1)%2};e.extend(i,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){e.each(i.Properties,function(t){var e="_"+t,i="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[i]=!0,this.parent&&(this.parent._flagStops=!0)}})},t)}}),e.extend(i.prototype,t.Utils.Events,{clone:function(){var t=new i;return e.each(i.Properties,function(e){t[e]=this[e]},this),t},toObject:function(){var t={};return e.each(i.Properties,function(e){t[e]=this[e]},this),t},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),i.MakeObservable(i.prototype);var r=t.Gradient=function(i){this._renderer={},this._renderer.type="gradient",this.id=t.Identifier+t.uniqueId(),this.classList=[],this._renderer.flagStops=e.bind(r.FlagStops,this),this._renderer.bindStops=e.bind(r.BindStops,this),this._renderer.unbindStops=e.bind(r.UnbindStops,this),this.spread="pad",this.stops=i};e.extend(r,{Stop:i,Properties:["spread"],MakeObservable:function(i){e.each(r.Properties,t.Utils.defineProperty,i),Object.defineProperty(i,"stops",{enumerable:!0,get:function(){return this._stops},set:function(e){var i=this._renderer.bindStops,r=this._renderer.unbindStops;this._stops&&this._stops.unbind(t.Events.insert,i).unbind(t.Events.remove,r),this._stops=new t.Utils.Collection((e||[]).slice(0)),this._stops.bind(t.Events.insert,i).bind(t.Events.remove,r),i(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(e){for(var i=e.length;i--;)e[i].bind(t.Events.change,this._renderer.flagStops),e[i].parent=this;this._renderer.flagStops()},UnbindStops:function(e){for(var i=e.length;i--;)e[i].unbind(t.Events.change,this._renderer.flagStops),delete e[i].parent;this._renderer.flagStops()}}),e.extend(r.prototype,t.Utils.Events,{_flagStops:!1,_flagSpread:!1,clone:function(i){i=i||this.parent;var n=e.map(this.stops,function(t){return t.clone()}),s=new r(n);return e.each(t.Gradient.Properties,function(t){s[t]=this[t]},this),i&&i.add(s),s},toObject:function(){var t={stops:e.map(this.stops,function(t){return t.toObject()})};return e.each(r.Properties,function(e){t[e]=this[e]},this),t},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(t.Events.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),r.MakeObservable(r.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Utils,i=t.LinearGradient=function(r,n,s,a,o){t.Gradient.call(this,o),this._renderer.type="linear-gradient",o=e.bind(i.FlagEndPoints,this),this.left=(new t.Vector).bind(t.Events.change,o),this.right=(new t.Vector).bind(t.Events.change,o),e.isNumber(r)&&(this.left.x=r),e.isNumber(n)&&(this.left.y=n),e.isNumber(s)&&(this.right.x=s),e.isNumber(a)&&(this.right.y=a)};e.extend(i,{Stop:t.Gradient.Stop,MakeObservable:function(e){t.Gradient.MakeObservable(e)},FlagEndPoints:function(){this._flagEndPoints=!0}}),e.extend(i.prototype,t.Gradient.prototype,{_flagEndPoints:!1,clone:function(r){r=r||this.parent;var n=e.map(this.stops,function(t){return t.clone()}),s=new i(this.left._x,this.left._y,this.right._x,this.right._y,n);return e.each(t.Gradient.Properties,function(t){s[t]=this[t]},this),r&&r.add(s),s},toObject:function(){var e=t.Gradient.prototype.toObject.call(this);return e.left=this.left.toObject(),e.right=this.right.toObject(),e},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(t.Events.change),this},flagReset:function(){return this._flagEndPoints=!1,t.Gradient.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Utils,i=t.RadialGradient=function(i,r,n,s,a,o){t.Gradient.call(this,s),this._renderer.type="radial-gradient",this.center=(new t.Vector).bind(t.Events.change,e.bind(function(){this._flagCenter=!0},this)),this.radius=e.isNumber(n)?n:20,this.focal=(new t.Vector).bind(t.Events.change,e.bind(function(){this._flagFocal=!0},this)),e.isNumber(i)&&(this.center.x=i),e.isNumber(r)&&(this.center.y=r),this.focal.copy(this.center),e.isNumber(a)&&(this.focal.x=a),e.isNumber(o)&&(this.focal.y=o)};e.extend(i,{Stop:t.Gradient.Stop,Properties:["radius"],MakeObservable:function(r){t.Gradient.MakeObservable(r),e.each(i.Properties,t.Utils.defineProperty,r)}}),e.extend(i.prototype,t.Gradient.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,clone:function(r){r=r||this.parent;var n=e.map(this.stops,function(t){return t.clone()}),s=new i(this.center._x,this.center._y,this._radius,n,this.focal._x,this.focal._y);return e.each(t.Gradient.Properties.concat(i.Properties),function(t){s[t]=this[t]},this),r&&r.add(s),s},toObject:function(){var r=t.Gradient.prototype.toObject.call(this);return e.each(i.Properties,function(t){r[t]=this[t]},this),r.center=this.center.toObject(),r.focal=this.focal.toObject(),r},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(t.Events.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,t.Gradient.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}((void 0!==e?e:this).Two),function(t){var e,i=t.Utils,r=/\.(mp4|webm)$/i;this.document&&(e=document.createElement("a"));var n=t.Texture=function(e,r){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=i.bind(n.FlagOffset,this),this._renderer.flagScale=i.bind(n.FlagScale,this),this.id=t.Identifier+t.uniqueId(),this.classList=[],this.offset=new t.Vector,i.isFunction(r)){var s=i.bind(function(){this.unbind(t.Events.load,s),i.isFunction(r)&&r()},this);this.bind(t.Events.load,s)}i.isString(e)?this.src=e:i.isElement(e)&&(this.image=e),this._update()};i.extend(n,{Properties:["src","loaded","repeat"],ImageRegistry:new t.Registry,getAbsoluteURL:function(t){return e?(e.href=t,e.href):t},getImage:function(t){return t=n.getAbsoluteURL(t),n.ImageRegistry.contains(t)?n.ImageRegistry.get(t):((t=r.test(t)?document.createElement("video"):document.createElement("img")).crossOrigin="anonymous",t)},Register:{canvas:function(t,e){t._src="#"+t.id,n.ImageRegistry.add(t.src,t.image),i.isFunction(e)&&e()},img:function(e,r){var s=function(t){e.image.removeEventListener("load",s,!1),e.image.removeEventListener("error",a,!1),i.isFunction(r)&&r()},a=function(i){throw e.image.removeEventListener("load",s,!1),e.image.removeEventListener("error",a,!1),new t.Utils.Error("unable to load "+e.src)};i.isNumber(e.image.width)&&0<e.image.width&&i.isNumber(e.image.height)&&0<e.image.height?s():(e.image.addEventListener("load",s,!1),e.image.addEventListener("error",a,!1)),e._src=n.getAbsoluteURL(e._src),e.image&&e.image.getAttribute("two-src")||(e.image.setAttribute("two-src",e.src),n.ImageRegistry.add(e.src,e.image),e.image.src=e.src)},video:function(e,r){var s=function(t){e.image.removeEventListener("load",s,!1),e.image.removeEventListener("error",a,!1),e.image.width=e.image.videoWidth,e.image.height=e.image.videoHeight,e.image.play(),i.isFunction(r)&&r()},a=function(i){throw e.image.removeEventListener("load",s,!1),e.image.removeEventListener("error",a,!1),new t.Utils.Error("unable to load "+e.src)};e._src=n.getAbsoluteURL(e._src),e.image.addEventListener("canplaythrough",s,!1),e.image.addEventListener("error",a,!1),e.image&&e.image.getAttribute("two-src")||(e.image.setAttribute("two-src",e.src),n.ImageRegistry.add(e.src,e.image),e.image.src=e.src,e.image.loop=!0,e.image.load())}},load:function(t,e){var i=t.image,r=i&&i.nodeName.toLowerCase();t._flagImage&&(/canvas/i.test(r)?n.Register.canvas(t,e):(t._src=i.getAttribute("two-src")||i.src,n.Register[r](t,e))),t._flagSrc&&(i||(t.image=n.getImage(t.src)),r=t.image.nodeName.toLowerCase(),n.Register[r](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(e){i.each(n.Properties,t.Utils.defineProperty,e),Object.defineProperty(e,"image",{enumerable:!0,get:function(){return this._image},set:function(t){switch(t&&t.nodeName.toLowerCase()){case"canvas":var e="#"+t.id;break;default:e=t.src}n.ImageRegistry.contains(e)?this._image=n.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}}),Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return this._offset},set:function(e){this._offset&&this._offset.unbind(t.Events.change,this._renderer.flagOffset),this._offset=e,this._offset.bind(t.Events.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(e,"scale",{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof t.Vector&&this._scale.unbind(t.Events.change,this._renderer.flagScale),this._scale=e,this._scale instanceof t.Vector&&this._scale.bind(t.Events.change,this._renderer.flagScale),this._flagScale=!0}})}}),i.extend(n.prototype,t.Utils.Events,t.Shape.prototype,{_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,clone:function(){return new n(this.src)},toObject:function(){return{src:this.src,image:this.image}},_update:function(){return(this._flagSrc||this._flagImage||this._flagVideo)&&(this.trigger(t.Events.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,n.load(this,i.bind(function(){this.loaded=!0,this.trigger(t.Events.change).trigger(t.Events.load)},this)))),this._image&&4<=this._image.readyState&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),n.MakeObservable(n.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Utils,i=t.Path,r=t.Rectangle,n=t.Sprite=function(r,n,s,a,o,l){i.call(this,[new t.Anchor,new t.Anchor,new t.Anchor,new t.Anchor],!0),this.noStroke(),this.noFill(),r instanceof t.Texture?this.texture=r:e.isString(r)&&(this.texture=new t.Texture(r)),this._update(),this.translation.set(n||0,s||0),e.isNumber(a)&&(this.columns=a),e.isNumber(o)&&(this.rows=o),e.isNumber(l)&&(this.frameRate=l)};e.extend(n,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(i){r.MakeObservable(i),e.each(n.Properties,t.Utils.defineProperty,i)}}),e.extend(n.prototype,r.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,play:function(t,i,r){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=e.performance.now(),e.isNumber(t)&&(this._firstFrame=t),e.isNumber(i)&&(this._lastFrame=i),e.isFunction(r)?this._onLastFrame=r:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){t=t||this.parent;var e=new n(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},_update:function(){var t=this._texture,i=this._columns,n=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){var s=t.image.width,a=t.image.height,o=s/i;n=a/n;var l=this._amount;if(this.width!==o&&(this.width=o),this.height!==n&&(this.height=n),this._playing&&0<this._frameRate){e.isNaN(this._lastFrame)&&(this._lastFrame=l-1),l=e.performance.now()-this._startTime;var h=this._lastFrame+1,c=1e3*(h-this._firstFrame)/this._frameRate;l=this._loop?l%c:Math.min(l,c),l=e.lerp(this._firstFrame,h,l/c),(l=Math.floor(l))!==this._index&&(this._index=l,l>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame())}o=this._index%i*-o+(s-o)/2,i=-n*Math.floor(this._index/i)+(a-n)/2,o!==t.offset.x&&(t.offset.x=o),i!==t.offset.y&&(t.offset.y=i)}return r.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,r.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}((void 0!==e?e:this).Two),function(t){var e=t.Utils,i=t.Path,r=t.Rectangle,n=t.ImageSequence=function(r,s,a,o){i.call(this,[new t.Anchor,new t.Anchor,new t.Anchor,new t.Anchor],!0),this._renderer.flagTextures=e.bind(n.FlagTextures,this),this._renderer.bindTextures=e.bind(n.BindTextures,this),this._renderer.unbindTextures=e.bind(n.UnbindTextures,this),this.noStroke(),this.noFill(),this.textures=e.map(r,n.GenerateTexture,this),this._update(),this.translation.set(s||0,a||0),e.isNumber(o)?this.frameRate=o:this.frameRate=n.DefaultFrameRate};e.extend(n,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(e){for(var i=e.length;i--;)e[i].bind(t.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(e){for(var i=e.length;i--;)e[i].unbind(t.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(i){r.MakeObservable(i),e.each(n.Properties,t.Utils.defineProperty,i),Object.defineProperty(i,"textures",{enumerable:!0,get:function(){return this._textures},set:function(e){var i=this._renderer.bindTextures,r=this._renderer.unbindTextures;this._textures&&this._textures.unbind(t.Events.insert,i).unbind(t.Events.remove,r),this._textures=new t.Utils.Collection((e||[]).slice(0)),this._textures.bind(t.Events.insert,i).bind(t.Events.remove,r),i(this._textures)}})},GenerateTexture:function(i){return i instanceof t.Texture?i:e.isString(i)?new t.Texture(i):void 0}}),e.extend(n.prototype,r.prototype,{_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,play:function(t,i,r){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=e.performance.now(),e.isNumber(t)&&(this._firstFrame=t),e.isNumber(i)&&(this._lastFrame=i),e.isFunction(r)?this._onLastFrame=r:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){t=t||this.parent;var e=new n(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},_update:function(){var i=this._textures;if(this._flagTextures&&(this._amount=i.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&0<this._frameRate){var n=this._amount;e.isNaN(this._lastFrame)&&(this._lastFrame=n-1),n=e.performance.now()-this._startTime;var s=this._lastFrame+1,a=1e3*(s-this._firstFrame)/this._frameRate;n=this._loop?n%a:Math.min(n,a),n=e.lerp(this._firstFrame,s,n/a),(n=Math.floor(n))!==this._index&&(this._index=n,(s=i[this._index]).loaded&&(i=s.image.width,a=s.image.height,this.width!==i&&(this.width=i),this.height!==a&&(this.height=a),this.fill=s,n>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))}else!this._flagIndex&&this.fill instanceof t.Texture||((s=i[this._index]).loaded&&(i=s.image.width,a=s.image.height,this.width!==i&&(this.width=i),this.height!==a&&(this.height=a)),this.fill=s);return r.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,r.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}((void 0!==e?e:this).Two),function(t){function e(t,e){var i=t.parent;if(i===e)this.additions.push(t),this._flagAdditions=!0;else{if(i&&i.children.ids[t.id]){var r=n.indexOf(i.children,t);i.children.splice(r,1),0<=(r=n.indexOf(i.additions,t))?i.additions.splice(r,1):(i.subtractions.push(t),i._flagSubtractions=!0)}e?(t.parent=e,this.additions.push(t),this._flagAdditions=!0):(0<=(r=n.indexOf(this.additions,t))?this.additions.splice(r,1):(this.subtractions.push(t),this._flagSubtractions=!0),delete t.parent)}}var i=Math.min,r=Math.max,n=t.Utils,s=function(){t.Utils.Collection.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(t.Events.insert,this.attach),this.on(t.Events.remove,this.detach),s.prototype.attach.apply(this,arguments)};s.prototype=new t.Utils.Collection,s.prototype.constructor=s,n.extend(s.prototype,{attach:function(t){for(var e=0;e<t.length;e++)this.ids[t[e].id]=t[e];return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var a=t.Group=function(){t.Shape.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=arguments};n.extend(a,{Children:s,InsertChildren:function(t){for(var i=0;i<t.length;i++)e.call(this,t[i],this)},RemoveChildren:function(t){for(var i=0;i<t.length;i++)e.call(this,t[i])},OrderChildren:function(t){this._flagOrder=!0},MakeObservable:function(e){var i=t.Path.Properties.slice(0),r=n.indexOf(i,"opacity");0<=r&&(i.splice(r,1),Object.defineProperty(e,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!=t,this._opacity=t}})),t.Shape.MakeObservable(e),a.MakeGetterSetters(e,i),Object.defineProperty(e,"children",{enumerable:!0,get:function(){return this._children},set:function(e){var i=n.bind(a.InsertChildren,this),r=n.bind(a.RemoveChildren,this),o=n.bind(a.OrderChildren,this);this._children&&this._children.unbind(),this._children=new s(e),this._children.bind(t.Events.insert,i),this._children.bind(t.Events.remove,r),this._children.bind(t.Events.order,o)}}),Object.defineProperty(e,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){n.isArray(e)||(e=[e]),n.each(e,function(e){a.MakeGetterSetter(t,e)})},MakeGetterSetter:function(t,e){var i="_"+e;Object.defineProperty(t,e,{enumerable:!0,get:function(){return this[i]},set:function(t){this[i]=t,n.each(this.children,function(i){i[e]=t})}})}}),n.extend(a.prototype,t.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_mask:null,clone:function(t){t=t||this.parent;var e=new a,i=n.map(this.children,function(t){return t.clone(e)});return e.add(i),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,t&&t.add(e),e},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale,opacity:this.opacity,mask:this.mask?this.mask.toObject():null};return n.each(this.children,function(e,i){t.children[i]=e.toObject()},this),t},corner:function(){var t=this.getBoundingClientRect(!0),e={x:t.left,y:t.top};return this.children.forEach(function(t){t.translation.subSelf(e)}),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},this.children.forEach(function(e){e.isShape&&e.translation.subSelf(t.centroid)}),this},getById:function(t){var e=function(t,i){if(t.id===i)return t;if(t.children)for(var r=t.children.length;r--;){var n=e(t.children[r],i);if(n)return n}};return e(this,t)||null},getByClassName:function(t){var e=[],i=function(t,r){return-1!=t.classList.indexOf(r)?e.push(t):t.children&&t.children.forEach(function(t){i(t,r)}),e};return i(this,t)},getByType:function(e){var i=[],r=function(e,n){for(var s in e.children)e.children[s]instanceof n?i.push(e.children[s]):e.children[s]instanceof t.Group&&r(e.children[s],n);return i};return r(this,e)},add:function(t){t=t instanceof Array?t.slice():n.toArray(arguments);for(var e=0;e<t.length;e++)t[e]&&t[e].id&&this.children.push(t[e]);return this},remove:function(t){var e=this.parent;if(0>=arguments.length&&e)return e.remove(this),this;for(t=t instanceof Array?t.slice():n.toArray(arguments),e=0;e<t.length;e++)t[e]&&this.children.ids[t[e].id]&&this.children.splice(n.indexOf(this.children,t[e]),1);return this},getBoundingClientRect:function(t){var e;this._update(!0);var s=1/0,a=-1/0,o=1/0,l=-1/0;return this.children.forEach(function(h){/(linear-gradient|radial-gradient|gradient)/.test(h._renderer.type)||(e=h.getBoundingClientRect(t),n.isNumber(e.top)&&n.isNumber(e.left)&&n.isNumber(e.right)&&n.isNumber(e.bottom)&&(o=i(e.top,o),s=i(e.left,s),a=r(e.right,a),l=r(e.bottom,l)))},this),{top:o,left:s,right:a,bottom:l,width:a-s,height:l-o}},noFill:function(){return this.children.forEach(function(t){t.noFill()}),this},noStroke:function(){return this.children.forEach(function(t){t.noStroke()}),this},subdivide:function(){var t=arguments;return this.children.forEach(function(e){e.subdivide.apply(e,t)}),this},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=!1,t.Shape.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}((void 0!==e?e:this).Two);
},{}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("twojs-ts")),n=new t.default({type:t.default.Types.svg,fullscreen:!0,autostart:!0}),u=document.getElementById("canvas");n.appendTo(canvas);var o=!1,r=[],a=[],s=function(e){return e[e.length-1]},c=function(e){return new t.default.Vector(e.x,e.y)};function i(e){var t=e[0],u=e[1],o=n.makePath(t.x,t.y,u.x,u.y,!0);o.noFill().stroke="#6dcff6",o.linewidth=10,o.vertices.forEach(function(e){return e.addSelf(o.translation)}),o.translation.clear(),e.slice(2).forEach(function(e){return o.vertices.push(c(e))}),r.push({path:o,points:e})}function d(e){var t={x:e.clientX||e.pageX,y:e.clientY||e.pageY};a.push(t),2==a.length?i(a):a.length>1&&s(r).path.vertices.push(c(t))}function v(){a=[],o=!1}function l(e){e.preventDefault(),d(e.changedTouches[0])}document.addEventListener("mousedown",function(e){o=!0}),document.addEventListener("mousemove",function(e){return o&&d(e)}),document.addEventListener("mouseup",v),document.addEventListener("touchstart",l,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",v);var p=[];document.addEventListener("keydown",function(e){if(event.ctrlKey&&"z"===event.key&&r.length){var t=r.pop();t.path.remove(),p.push(t.points)}event.ctrlKey&&"y"===event.key&&p.length&&i(p.pop())},!1);
},{"twojs-ts":"gWWw"}]},{},["QCba"], null)
//# sourceMappingURL=/doodlang/src.a490cc27.js.map